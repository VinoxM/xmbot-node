webpackJsonp([16],{"6MwI":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i={name:"url-prefix-conf",data:function(){return{urlConf:this.$urlConf,baseUrlPrefix:"",urlShow:!1,settingShow:!1,rightShow:!1}},computed:{positionClass:function(){return this.settingShow?this.urlShow?"position-fixed right-10":this.rightShow?"position-fixed right-0":"position-fixed right-10":"position-fixed right-0"}},methods:{prefixChanged:function(e){this.updateBaseUrl(e),window.location.reload()},hide:function(){this.urlShow=!1,this.rightShow=!1},rightArrowShow:function(){this.rightShow=!0}},mounted:function(){var e=this.$cookies.get("curUrlPrefix");this.baseUrlPrefix=e||"base"}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.positionClass,on:{mouseleave:e.hide,mouseenter:e.rightArrowShow}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.urlShow,expression:"!urlShow"}]},[e.settingShow?n("span",[n("el-tooltip",{attrs:{content:"url前缀设置",placement:"top"}},[n("i",{staticClass:"el-icon-setting setting-icon",on:{click:function(t){e.urlShow=!0}}})]),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.rightShow,expression:"rightShow"}],staticClass:"el-icon-arrow-right setting-icon",on:{click:function(t){e.settingShow=!1}}})],1):n("span",[n("i",{staticClass:"el-icon-arrow-left setting-icon",on:{click:function(t){e.settingShow=!0}}})])]),e._v(" "),n("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.urlShow,expression:"urlShow"}],attrs:{size:"small"},on:{change:e.prefixChanged},model:{value:e.baseUrlPrefix,callback:function(t){e.baseUrlPrefix=t},expression:"baseUrlPrefix"}},[n("el-tooltip",{attrs:{content:"默认前缀:"+e.urlConf.base_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"base"}},[e._v("base")])],1),e._v(" "),n("el-tooltip",{attrs:{content:"开发前缀:"+e.urlConf.dev_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"dev"}},[e._v("dev")])],1),e._v(" "),n("el-tooltip",{attrs:{content:"服务器前缀:"+e.urlConf.pro_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"pro"}},[e._v("pro")])],1)],1)],1)},staticRenderFns:[]};var a={name:"App",components:{"url-conf":n("VU/8")(i,r,!1,function(e){n("fOKU")},"data-v-1cf41455",null).exports},computed:{isAdmin:function(){return this.$store.state.isAdmin}},data:function(){return{}},created:function(){this.$cookies.get("user_id")}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-left",attrs:{id:"app"}},[t("router-view"),this._v(" "),t("url-conf")],1)},staticRenderFns:[]};var u=n("VU/8")(a,s,!1,function(e){n("6MwI")},null,null).exports,c=n("YaEn"),l=n("zL8q"),d=n.n(l),p=(n("tvR6"),n("gyMJ")),h=n("ppUw"),f=n.n(h),m=n("NYxO");o.default.use(m.a);var g=new m.a.Store({state:{isAdmin:!1,calendar_setting:{}},mutations:{updateIsAdmin:function(e,t){e.isAdmin=t},updateCalendar:function(e,t){e.calendar_setting=t}}});o.default.component("xm-tags",function(){return n.e(4).then(n.bind(null,"30WY"))}),o.default.component("xm-info-box",function(){return n.e(14).then(n.bind(null,"eJXZ"))}),o.default.config.productionTip=!1,o.default.use(d.a),o.default.use(f.a),o.default.prototype.$ajax=p.b,o.default.prototype.$urlConf=p.e;var v=new o.default({router:c.d,store:g,components:{App:u},template:"<App/>"});o.default.prototype.checkAuth=function(){return Object(c.a)(v)},o.default.prototype.updateBaseUrl=function(e){Object(p.c)(e),v.$cookies.set("curUrlPrefix",e)},Object(p.a)(v),Object(p.c)(v.$cookies.get("curUrlPrefix")),Object(c.b)(v).then(function(){v.$store.commit("updateIsAdmin",!0)}).catch(function(){v.$store.commit("updateIsAdmin",!1)}),v.$mount("#app")},YaEn:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c}),t.a=l,t.b=function(e,t){return new i.a(function(n,o){var i=t||e.$cookies.get("user_id");i?e.$ajax({url:"/checkIsAdmin.valid",params:{user_id:i}}).then(function(e){0===e.code?n():o()}).catch(function(e){o()}):o()})};var o=n("//Fk"),i=n.n(o),r=n("7+uW"),a=n("/ocq");r.default.use(a.a);var s=[{title:"帮助手册",icon:"el-icon-notebook-2",path:"/plugins-dict",name:"plugins-dict",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"OzDY"))}},{title:"复读设置",icon:"el-icon-printer",path:"/repeat-setting",name:"repeat-setting",component:function(){return n.e(3).then(n.bind(null,"fj0r"))}},{title:"Chat设置",icon:"el-icon-chat-round",path:"/chat-setting",name:"chat-setting",component:function(){return n.e(7).then(n.bind(null,"Z2No"))}},{title:"RSS设置",icon:"el-icon-paperclip",path:"/rss-setting",name:"rss-setting",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"qdI8"))}},{title:"Live设置",icon:"el-icon-video-play",path:"/live-setting",name:"live-setting",meta:{auth:!0},component:function(){return n.e(10).then(n.bind(null,"YXiS"))}},{title:"PCR日历设置",icon:"el-icon-date",path:"/calendar-setting",name:"calendar-setting",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"Zv61"))}},{title:"PCR卡池设置",icon:"el-icon-s-custom",path:"/gacha/pcr/pool-setting",name:"pcr-pool-setting",meta:{auth:!1},component:function(){return Promise.all([n.e(1),n.e(0)]).then(n.bind(null,"DKKw"))}}],u=[{path:"/",redirect:"/index"},{path:"*",redirect:"/404"},{path:"/404",name:"404",component:function(){return n.e(5).then(n.bind(null,"thLP"))}},{path:"/index",name:"Index",component:function(){return n.e(9).then(n.bind(null,"dAjm"))},redirect:"/home",children:[{title:"首页",icon:"",path:"/home",name:"home",component:function(){return n.e(12).then(n.bind(null,"wUZA"))}}].concat(s)},{path:"/login",name:"login",component:function(){return n.e(11).then(n.bind(null,"s3nr"))}},{path:"/reset-pwd",name:"resetPassword",component:function(){return n.e(6).then(n.bind(null,"X+6L"))}}],c=new a.a({routes:u});function l(e){return new i.a(function(t,n){var o=e.$cookies.get("token"),i=e.$cookies.get("salt");o&&i?e.$ajax({url:"/token.valid",params:{token:o,salt:i}}).then(function(o){0===o.code?t():e.$message({type:"error",message:o.msg,duration:1e3,onClose:function(){n("/login")}})}).catch(function(e){n("/index")}):e.$message({type:"error",message:"未登录",duration:1e3,onClose:function(){n("/login")}})})}},fOKU:function(e,t){},gyMJ:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"e",function(){return d}),t.c=function(e){l.defaults.baseURL=d[(e||p)+"_url"]},t.a=function(e){var t=this;l.interceptors.request.use(function(t){var n=e.$cookies.get("salt"),o=e.$cookies.get("token"),i=e.$cookies.get("user_id");return t.headers.token=o||"",t.headers.salt=n||"",t.headers.user_id=i||"",t},function(t){return e.$message({type:"error",message:"请求出错"}),u.a.reject(t)}),l.interceptors.response.use(function(n){return 400===n.data.code||403===n.data.code?(e.$message({type:"error",message:n.data.msg,duration:1e3,onClose:(o=a()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$router.push("/login");case 2:case"end":return t.stop()}},n,t)})),function(){return o.apply(this,arguments)})}),u.a.reject("")):n.data;var o},function(t){return e.$message({type:"error",message:"服务器出错"}),u.a.reject(t)})};var o=n("Xxa5"),i=n.n(o),r=n("exGp"),a=n.n(r),s=n("//Fk"),u=n.n(s),c=n("mw3O"),l=(n.n(c),n("mtWM").default),d={base_url:"/",dev_url:"http://127.0.0.1:9221/",pro_url:"http://121.41.225.90:9221/"},p="base";t.d=l},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5fbe781a9866696539ae.js.map