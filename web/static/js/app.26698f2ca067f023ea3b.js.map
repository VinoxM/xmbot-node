{"version":3,"sources":["webpack:///src/components/url-prefix-conf.vue","webpack:///./src/components/url-prefix-conf.vue?e7c9","webpack:///./src/components/url-prefix-conf.vue","webpack:///src/App.vue","webpack:///./src/App.vue?f9c2","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/api/index.js"],"names":["url_prefix_conf","name","data","urlConf","this","$urlConf","baseUrlPrefix","urlShow","settingShow","rightShow","computed","positionClass","methods","prefixChanged","val","updateBaseUrl","window","location","reload","hide","rightArrowShow","mounted","curUrlPrefix","$cookies","get","components_url_prefix_conf","render","_vm","_h","$createElement","_c","_self","class","on","mouseleave","mouseenter","directives","rawName","value","expression","attrs","content","placement","staticClass","click","$event","_v","size","change","model","callback","$$v","label","staticRenderFns","App","components","url-conf","__webpack_require__","normalizeComponent","ssrContext","isAdmin","created","_this","user_id","checkAdmin","then","catch","selectortype_template_index_0_src_App","id","src_App","App_normalizeComponent","Vue","use","Router","router","routes","path","redirect","component","e","bind","meta","auth","checkAuth","vue","promise_default","a","resolve","reject","token","salt","$ajax","url","params","res","$message","type","message","duration","onClose","config","productionTip","ElementUi","VueCookies","prototype","ajax","userId","err","prefix","changeAjaxBaseUrl","set","template","addAjaxInterceptors","$mount","defaults","baseURL","defaultPrefix","interceptors","request","headers","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","response","require","default","base_url","dev_url","pro_url"],"mappings":"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","file":"static/js/app.26698f2ca067f023ea3b.js","sourcesContent":["<template>\n  <div @mouseleave=\"hide\" @mouseenter=\"rightArrowShow\" :class=\"positionClass\">\n    <span v-show=\"!urlShow\">\n      <span v-if=\"!settingShow\">\n        <i class=\"el-icon-arrow-left setting-icon\" @click=\"settingShow=true\"></i>\n      </span>\n      <span v-else>\n        <el-tooltip content=\"url前缀设置\" placement=\"top\">\n          <i class=\"el-icon-setting setting-icon\" @click=\"urlShow=true\"></i>\n        </el-tooltip>\n        <i class=\"el-icon-arrow-right setting-icon\" v-show=\"rightShow\" @click=\"settingShow=false\"></i>\n      </span>\n    </span>\n<!--    <transition name=\"fade\">-->\n      <el-radio-group v-model=\"baseUrlPrefix\" v-show=\"urlShow\" @change=\"prefixChanged\" size=\"small\">\n        <el-tooltip :content=\"`默认前缀:${urlConf.base_url}`\" placement=\"top\">\n          <el-radio-button label=\"base\">base</el-radio-button>\n        </el-tooltip>\n        <el-tooltip :content=\"`开发前缀:${urlConf.dev_url}`\" placement=\"top\">\n          <el-radio-button label=\"dev\">dev</el-radio-button>\n        </el-tooltip>\n        <el-tooltip :content=\"`服务器前缀:${urlConf.pro_url}`\" placement=\"top\">\n          <el-radio-button label=\"pro\">pro</el-radio-button>\n        </el-tooltip>\n      </el-radio-group>\n<!--    </transition>-->\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"url-prefix-conf\",\n    data() {\n      return {\n        urlConf: this.$urlConf,\n        baseUrlPrefix: '',\n        urlShow: false,\n        settingShow: false,\n        rightShow: false,\n      }\n    },\n    computed: {\n      positionClass() {\n        if (this.settingShow) {\n          if (this.urlShow) {\n            return 'position-fixed right-10'\n          } else\n            return this.rightShow ? 'position-fixed right-0' : 'position-fixed right-10'\n        } else {\n          return 'position-fixed right-0'\n        }\n      }\n    },\n    methods: {\n      prefixChanged(val) {\n        this.updateBaseUrl(val)\n        window.location.reload()\n      },\n      hide() {\n        this.urlShow = false\n        this.rightShow = false\n      },\n      rightArrowShow() {\n        this.rightShow = true\n      }\n    },\n    mounted() {\n      let curUrlPrefix = this.$cookies.get('curUrlPrefix')\n      this.baseUrlPrefix = curUrlPrefix ? curUrlPrefix : 'base'\n    }\n  }\n</script>\n\n<style scoped>\n  .setting-icon {\n    display: inline-block;\n    cursor: pointer;\n    line-height: 32px;\n    font-size: 18px;\n    height: 32px;\n    width: 24px;\n  }\n\n  .setting-icon:hover {\n    color: #ffffff;\n    background-color: #66b1ff;\n    border-radius: 4px;\n  }\n\n  .position-fixed {\n    position: fixed;\n    display: inline;\n    bottom: 10px;\n    text-align: center;\n  }\n\n  .right-10 {\n    right: 28px\n  }\n\n  .right-0 {\n    right: 0\n  }\n\n  .fade-enter-active, .fade-leave-active {\n    transition: opacity .5s;\n  }\n\n  .fade-enter, .fade-leave-to {\n    opacity: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/url-prefix-conf.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.positionClass,on:{\"mouseleave\":_vm.hide,\"mouseenter\":_vm.rightArrowShow}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.urlShow),expression:\"!urlShow\"}]},[(!_vm.settingShow)?_c('span',[_c('i',{staticClass:\"el-icon-arrow-left setting-icon\",on:{\"click\":function($event){_vm.settingShow=true}}})]):_c('span',[_c('el-tooltip',{attrs:{\"content\":\"url前缀设置\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-setting setting-icon\",on:{\"click\":function($event){_vm.urlShow=true}}})]),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rightShow),expression:\"rightShow\"}],staticClass:\"el-icon-arrow-right setting-icon\",on:{\"click\":function($event){_vm.settingShow=false}}})],1)]),_vm._v(\" \"),_c('el-radio-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.urlShow),expression:\"urlShow\"}],attrs:{\"size\":\"small\"},on:{\"change\":_vm.prefixChanged},model:{value:(_vm.baseUrlPrefix),callback:function ($$v) {_vm.baseUrlPrefix=$$v},expression:\"baseUrlPrefix\"}},[_c('el-tooltip',{attrs:{\"content\":(\"默认前缀:\" + (_vm.urlConf.base_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"base\"}},[_vm._v(\"base\")])],1),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"content\":(\"开发前缀:\" + (_vm.urlConf.dev_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"dev\"}},[_vm._v(\"dev\")])],1),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"content\":(\"服务器前缀:\" + (_vm.urlConf.pro_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"pro\"}},[_vm._v(\"pro\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f0b3119\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/url-prefix-conf.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f0b3119\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./url-prefix-conf.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./url-prefix-conf.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./url-prefix-conf.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f0b3119\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./url-prefix-conf.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f0b3119\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/url-prefix-conf.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n    <url-conf></url-conf>\n  </div>\n</template>\n\n<script>\n  import urlConf from './components/url-prefix-conf'\n\n  export default {\n    name: 'App',\n    components: {\n      'url-conf': urlConf\n    },\n    data(){\n      return{\n        isAdmin:false\n      }\n    },\n    created() {\n      let user_id = this.$cookies.get('user_id')\n      this.checkAdmin(user_id).then(()=>this.isAdmin=true).catch(()=>this.isAdmin=false)\n    }\n  }\n</script>\n\n<style>\n  #app {\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    /*text-align: center;*/\n    color: #2c3e50;\n    /*margin-top: 60px;*/\n  }\n\n  label.el-form-item__label:after {\n    content: ': ';\n  }\n\n  .text-center {\n    text-align: center !important;\n  }\n\n  .text-left {\n    text-align: left !important;\n  }\n\n  .text-right {\n    text-align: right !important;\n  }\n\n  .display-inline-block {\n    display: inline-block;\n  }\n\n  .el-tooltip__popper.is-light {\n    border: 1px solid #b5b5b5 !important;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view'),_vm._v(\" \"),_c('url-conf')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51754b8d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51754b8d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51754b8d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport const router = new Router({\n  routes: [\n    {\n      path: '/',\n      redirect: '/index'\n    },\n    {\n      path: '/index',\n      name: 'Index',\n      component: ()=>import('../components/index')\n    },\n    {\n      path: '/404',\n      name: '404',\n      component: ()=>import('../components/404')\n    },\n    {\n      path:'/login',\n      name:'login',\n      component: ()=>import('../components/login')\n    },\n    {\n      path: '/reset-pwd',\n      name:'resetPassword',\n      component: ()=>import('../components/reset-pwd')\n    },\n    {\n      path:'/gacha/pcr/pool-setting',\n      name:'pcr-pool-setting',\n      meta:{auth:true},\n      component: ()=>import('../components/gacha/pcr-pool-setting')\n    },\n    {\n      path:'/plugins-dict',\n      name:'plugins-dict',\n      component: ()=>import('../components/plugins-dict')\n    },\n    {\n      path: '*',\n      redirect: '/404'\n    }\n  ]\n})\n\nexport function addRouterInterceptor() {\n  router.beforeEach((to,from,next) => {\n    if(to.matched.some( m => m.meta&&m.meta.auth )) {\n      checkAuth().then(()=>next()).catch(err=>next(err))\n    } else {\n      next()\n    }\n  })\n}\n\nexport function checkAuth(vue) {\n  return new Promise((resolve, reject) => {\n    let token = vue.$cookies.get('token')\n    let salt = vue.$cookies.get('salt')\n    if(token&&salt){\n      vue.$ajax({\n        url:'/token.valid',\n        params:{token:token,salt:salt}\n      }).then(res=>{\n        if (res['code']===0){\n          resolve()\n        }else {\n          vue.$message({\n            type:'error',\n            message:res['msg'],\n            duration:1000,\n            onClose:()=>{\n              reject('/login')\n            }\n          })\n        }\n      }).catch(e=>{\n        reject('/index')\n      })\n    }else{\n      vue.$message({\n        type:'error',\n        message:'未登录',\n        duration:1000,\n        onClose:()=>{\n          reject('/login')\n        }\n      })\n    }\n  })\n}\n\nexport function checkIsAdmin(vue,userId) {\n  return new Promise((resolve, reject) => {\n    let user_id = userId?userId:vue.$cookies.get('user_id')\n    if (user_id) {\n      vue.$ajax({url: '/checkIsAdmin.valid', params: {user_id: user_id}})\n        .then(res => {\n          if (res['code'] === 0) {\n            resolve()\n          }else reject()\n        })\n        .catch(err=>{\n          reject()\n        })\n    }else\n      reject()\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\nimport App from './App'\nimport {router,addRouterInterceptor,checkAuth,checkIsAdmin} from './router'\nimport ElementUi from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport {urlConf,ajax,addAjaxInterceptors,changeAjaxBaseUrl} from './api'\nimport VueCookies from 'vue-cookies'\n\nVue.config.productionTip = false\nVue.use(ElementUi)\nVue.use(VueCookies)\n\nVue.prototype.$ajax = ajax\nVue.prototype.$urlConf = urlConf\nVue.prototype.checkAuth = () => checkAuth(vue)\nVue.prototype.checkAdmin = (user_id) => checkIsAdmin(vue,user_id)\nVue.prototype.updateBaseUrl = (prefix) => {\n  changeAjaxBaseUrl(prefix)\n  vue.$cookies.set('curUrlPrefix',prefix)\n}\n\nconst vue = new Vue({\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\naddAjaxInterceptors(vue)\n\nlet curUrlPrefix = vue.$cookies.get('curUrlPrefix')\nchangeAjaxBaseUrl(curUrlPrefix)\n\n// addRouterInterceptor()\n\n// 最后再绑定页面,确保前面所有操作已经完成后,再加载页面\nvue.$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export const ajax = require('axios').default\nimport Qs from 'qs'\n\nexport const urlConf = {\n  base_url: '/',\n  dev_url: 'http://127.0.0.1:9221/',\n  pro_url: 'http://121.41.225.90:9221/',\n}\n\nconst defaultPrefix = 'base'\n// const defaultPrefix = 'dev'\n// const defaultPrefix = 'pro'\n\nexport function changeAjaxBaseUrl(prefix) {\n  ajax.defaults.baseURL = urlConf[(prefix?prefix:defaultPrefix)+'_url']\n}\n\nexport function addAjaxInterceptors(vue){\n  ajax.interceptors.request.use(config => {\n    let salt = vue.$cookies.get('salt')\n    let token = vue.$cookies.get('token')\n    let user_id = vue.$cookies.get('user_id')\n    config.headers.token = token?token:''\n    config.headers.salt = salt?salt:''\n    config.headers.user_id = user_id?user_id:''\n    // config.data = Qs.stringify(config.data)\n    return config\n  },err => {\n    vue.$message({\n      type:'error',\n      message:'请求出错'\n    })\n    return Promise.reject(err)\n  })\n\n  ajax.interceptors.response.use(res => {\n    return res.data\n  },err => {\n    vue.$message({\n      type:'error',\n      message:'服务器出错'\n    })\n    return Promise.reject(err)\n  })\n}\n\nexport default ajax\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js"],"sourceRoot":""}