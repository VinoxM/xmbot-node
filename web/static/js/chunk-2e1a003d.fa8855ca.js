(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e1a003d"],{7739:function(e,r,t){"use strict";t("b685")},b685:function(e,r,t){},d539:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-header",[t("h2",[e._v("XmBot")])]),t("el-main",{staticClass:"text-center"},[t("el-card",{staticClass:"reset-box display-inline-block"},[t("el-row",[t("span",{staticClass:"reset-title"},[e._v("重置密码("+e._s(e.curUser)+")")])]),t("el-form",{ref:"resetForm",staticClass:"reset-form",attrs:{model:e.resetForm,"label-width":"auto",rules:e.rules}},[t("el-form-item",{attrs:{label:"新密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.resetForm.password,callback:function(r){e.$set(e.resetForm,"password",r)},expression:"resetForm.password"}})],1),t("el-form-item",{attrs:{label:"密码确认",prop:"password_twice"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.resetForm.password_twice,callback:function(r){e.$set(e.resetForm,"password_twice",r)},expression:"resetForm.password_twice"}})],1)],1),t("el-row",[t("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small",loading:e.resetLoading},on:{click:e.resetSubmit}},[e._v("确认 ")])],1)],1)],1)],1)},n=[],a=t("1da1"),o=(t("96cf"),{name:"reset-pwd",data:function(){var e=this,r=function(e,r,t){""===r?t(new Error("密码不能为空")):r.length<6?t(new Error("密码位数不能小于6位")):t()},t=function(r,t,s){""===t?s(new Error("密码不能为空")):t!==e.resetForm.password?s(new Error("两次输入密码不一致")):s()};return{loading:!0,resetForm:{password:"",password_twice:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:r,trigger:"blur"}],password_twice:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:t,trigger:"blur"}]},resetLoading:!1,curUser:""}},methods:{checkQuery:function(e){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=null,!e.hasOwnProperty("user")||!e.hasOwnProperty("salt")){t.next=7;break}return r.curUser=e.user,t.next=5,r.$ajax({url:"/salt-valid",params:e}).then((function(e){0===e["code"]?(r.loading=!1,s=!0):r.errorAndToIndex(e["msg"])})).catch((function(e){r.errorAndToIndex()}));case 5:t.next=8;break;case 7:s=!1;case 8:return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))()},errorAndToIndex:function(e){var r=this;this.$message({type:"error",message:"".concat(e,",即将跳转到首页"),duration:1e3,onClose:function(){r.$router.push("/index")}})},resetSubmit:function(){var e=this;this.resetLoading=!0,this.$refs.resetForm.validate((function(r){r?e.$ajax({url:"/reset-pwd",params:{user_id:e.curUser,password:e.resetForm.password}}).then((function(r){e.resetLoading=!1,0===r["code"]?(e.$cookies.remove("user_info"),e.$cookies.remove("token"),e.$message({message:r["msg"],type:"success",duration:1e3,onClose:function(){e.$router.push("/login")}})):e.$message.error(r["msg"])})):(e.resetLoading=!1,e.$message.warning("表单验证未通过"))}))}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.$route.query,r.next=3,e.checkQuery(t);case 3:if(r.sent){r.next=5;break}e.errorAndToIndex("参数不正确");case 5:case"end":return r.stop()}}),r)})))()}}),i=o,c=(t("7739"),t("2877")),u=Object(c["a"])(i,s,n,!1,null,"8f27612e",null);r["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2e1a003d.fa8855ca.js.map