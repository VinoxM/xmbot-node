webpackJsonp([9],{Z2No:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("gyMJ"),i={name:"chat-setting",data:function(){var t=this;return{loading:!1,setting:{},saveLoading:!1,form:{question:"",answer:""},rules:{question:[{required:!0,message:"请输入问题",trigger:"blur"},{validator:function(e,n,s){t.setting["Q&A"].some(function(t){return t.question===n})?s(new Error("与已有问题重复")):s()},trigger:"blur"}],answer:[{required:!0,message:"请输入回答",trigger:"blur"}]}}},computed:{isAdmin:function(){return this.$store.state.isAdmin}},methods:{delOne:function(t){this.setting["Q&A"].splice(t,1)},addOne:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.setting["Q&A"].push(t.form),t.form={question:"",answer:""})})},save:function(){var t,e=this;this.saveLoading=!0,(t=this.setting,Object(s.d)({url:"/setting/chat.save",method:"post",data:t})).then(function(t){e.$message({message:t.msg,type:0===t.code?"success":"error"}),e.saveLoading=!1}).catch(function(t){e.saveLoading=!1})}},created:function(){var t=this;this.loading=!0,Object(s.d)({url:"/setting/chat.json",method:"get"}).then(function(e){t.loading=!1,0===e.code?t.setting=e.data:t.$message.error(e.msg)}).catch(function(){t.loading=!1})}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"padding-top":"5px"}},[t.isAdmin?n("el-row",{staticStyle:{"margin-bottom":"15px"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存本页")])],1):t._e(),t._v(" "),n("xm-info-box",{staticStyle:{"padding-top":"20px"},attrs:{title:"Q&A",retractable:""}},[t._l(t.setting["Q&A"],function(e,s){return t.setting["Q&A"]?n("el-row",{key:s,staticClass:"qa-box"},[n("el-tag",[t._v(t._s(e.apiName))]),t._v(" "),n("el-input",{staticStyle:{width:"auto"},attrs:{readonly:!t.isAdmin},model:{value:e.question,callback:function(n){t.$set(e,"question",n)},expression:"item.question"}}),t._v(" "),n("span",{staticStyle:{"line-height":"40px"}},[t._v("：")]),t._v(" "),n("el-input",{staticStyle:{"min-width":"400px",width:"auto"},attrs:{readonly:!t.isAdmin},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"item['answer']"}}),t._v(" "),t.isAdmin?n("span",{staticClass:"text-right qa-btn"},[n("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(e){return t.delOne(s)}}},[t._v("删除")])],1):t._e()],1):t._e()}),t._v(" "),t.isAdmin?n("el-row",[n("el-form",{ref:"form",staticClass:"add-form",attrs:{model:t.form,rules:t.rules}},[n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{prop:"question"}},[n("el-input",{model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1)],1),t._v(" "),n("el-col",{staticClass:"text-center",staticStyle:{"line-height":"40px"},attrs:{span:1}},[n("span",[t._v("：")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"answer"}},[n("el-input",{model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form['answer']"}})],1)],1),t._v(" "),n("el-col",{staticClass:"text-right qa-btn",attrs:{span:2}},[n("el-button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:t.addOne}},[t._v("\n            添加\n          ")])],1)],1)],1):t._e()],2)],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(t){n("ZNaG")},"data-v-7e094eb8",null);e.default=r.exports},ZNaG:function(t,e){}});
//# sourceMappingURL=9.a453e98f9978b76d0041.js.map