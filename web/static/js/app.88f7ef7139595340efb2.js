webpackJsonp([7],{"2maz":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r={name:"url-prefix-conf",data:function(){return{urlConf:this.$urlConf,baseUrlPrefix:"",urlShow:!1,settingShow:!1,rightShow:!1}},computed:{positionClass:function(){return this.settingShow?this.urlShow?"position-fixed right-10":this.rightShow?"position-fixed right-0":"position-fixed right-10":"position-fixed right-0"}},methods:{prefixChanged:function(t){this.updateBaseUrl(t),window.location.reload()},hide:function(){this.urlShow=!1,this.rightShow=!1},rightArrowShow:function(){this.rightShow=!0}},mounted:function(){var t=this.$cookies.get("curUrlPrefix");this.baseUrlPrefix=t||"base"}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.positionClass,on:{mouseleave:t.hide,mouseenter:t.rightArrowShow}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.urlShow,expression:"!urlShow"}]},[t.settingShow?n("span",[n("el-tooltip",{attrs:{content:"url前缀设置",placement:"top"}},[n("i",{staticClass:"el-icon-setting setting-icon",on:{click:function(e){t.urlShow=!0}}})]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.rightShow,expression:"rightShow"}],staticClass:"el-icon-arrow-right setting-icon",on:{click:function(e){t.settingShow=!1}}})],1):n("span",[n("i",{staticClass:"el-icon-arrow-left setting-icon",on:{click:function(e){t.settingShow=!0}}})])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:t.urlShow,expression:"urlShow"}],attrs:{size:"small"},on:{change:t.prefixChanged},model:{value:t.baseUrlPrefix,callback:function(e){t.baseUrlPrefix=e},expression:"baseUrlPrefix"}},[n("el-tooltip",{attrs:{content:"默认前缀:"+t.urlConf.base_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"base"}},[t._v("base")])],1),t._v(" "),n("el-tooltip",{attrs:{content:"开发前缀:"+t.urlConf.dev_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"dev"}},[t._v("dev")])],1),t._v(" "),n("el-tooltip",{attrs:{content:"服务器前缀:"+t.urlConf.pro_url,placement:"top"}},[n("el-radio-button",{attrs:{label:"pro"}},[t._v("pro")])],1)],1)],1)],1)},staticRenderFns:[]};var a={name:"App",components:{"url-conf":n("VU/8")(r,i,!1,function(t){n("2maz")},"data-v-600a38c6",null).exports},data:function(){return{isAdmin:!1}},created:function(){var t=this,e=this.$cookies.get("user_id");this.checkAdmin(e).then(function(){return t.isAdmin=!0}).catch(function(){return t.isAdmin=!1})}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),this.isAdmin?e("url-conf"):this._e()],1)},staticRenderFns:[]};var u=n("VU/8")(a,s,!1,function(t){n("c+Y5")},null,null).exports,c=n("//Fk"),l=n.n(c),p=n("/ocq");o.default.use(p.a);var h=new p.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"Index",component:function(){return n.e(4).then(n.bind(null,"dAjm"))}},{path:"/404",name:"404",component:function(){return n.e(3).then(n.bind(null,"thLP"))}},{path:"/login",name:"login",component:function(){return n.e(5).then(n.bind(null,"K31e"))}},{path:"/reset-pwd",name:"resetPassword",component:function(){return n.e(1).then(n.bind(null,"7FYp"))}},{path:"/gacha/pcr/pool-setting",name:"pcr-pool-setting",meta:{auth:!0},component:function(){return n.e(0).then(n.bind(null,"DKKw"))}},{path:"/plugins-dict",name:"plugins-dict",component:function(){return n.e(2).then(n.bind(null,"DuF9"))}},{path:"*",redirect:"/404"}]});function d(t){return new l.a(function(e,n){var o=t.$cookies.get("token"),r=t.$cookies.get("salt");o&&r?t.$ajax({url:"/token.valid",params:{token:o,salt:r}}).then(function(o){0===o.code?e():t.$message({type:"error",message:o.msg,duration:1e3,onClose:function(){n("/login")}})}).catch(function(t){n("/index")}):t.$message({type:"error",message:"未登录",duration:1e3,onClose:function(){n("/login")}})})}var f=n("zL8q"),m=n.n(f),g=(n("tvR6"),n("gyMJ")),v=n("ppUw"),w=n.n(v);o.default.config.productionTip=!1,o.default.use(m.a),o.default.use(w.a),o.default.prototype.$ajax=g.b,o.default.prototype.$urlConf=g.e,o.default.prototype.checkAuth=function(){return d(b)},o.default.prototype.checkAdmin=function(t){return e=b,n=t,new l.a(function(t,o){var r=n||e.$cookies.get("user_id");r?e.$ajax({url:"/checkIsAdmin.valid",params:{user_id:r}}).then(function(e){0===e.code?t():o()}).catch(function(t){o()}):o()});var e,n},o.default.prototype.updateBaseUrl=function(t){Object(g.c)(t),b.$cookies.set("curUrlPrefix",t)};var b=new o.default({router:h,components:{App:u},template:"<App/>"});Object(g.a)(b);var x=b.$cookies.get("curUrlPrefix");Object(g.c)(x),b.$mount("#app")},"c+Y5":function(t,e){},gyMJ:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"e",function(){return s}),e.c=function(t){a.defaults.baseURL=s[t+"_url"]},e.a=function(t){a.interceptors.request.use(function(e){var n=t.$cookies.get("salt"),o=t.$cookies.get("token");return e.headers.token=o||"",e.headers.salt=n||"",e},function(e){return t.$message({type:"error",message:"请求出错"}),r.a.reject(e)}),a.interceptors.response.use(function(t){return t.data},function(e){return t.$message({type:"error",message:"服务器出错"}),r.a.reject(e)})};var o=n("//Fk"),r=n.n(o),i=n("mw3O"),a=(n.n(i),n("mtWM").default),s={base_url:"/",dev_url:"http://127.0.0.1:9221/",pro_url:"http://121.41.225.90:9221/"};e.d=a},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.88f7ef7139595340efb2.js.map