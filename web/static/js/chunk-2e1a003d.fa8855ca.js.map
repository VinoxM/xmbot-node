{"version":3,"sources":["webpack:///./src/components/admin/reset-pwd.vue?dab3","webpack:///./src/components/admin/reset-pwd.vue?8c31","webpack:///src/components/admin/reset-pwd.vue","webpack:///./src/components/admin/reset-pwd.vue?6e26","webpack:///./src/components/admin/reset-pwd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","_v","staticClass","_s","curUser","ref","attrs","resetForm","rules","model","callback","$$v","$set","resetLoading","on","resetSubmit","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-2e1a003d.fa8855ca.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reset-pwd.vue?vue&type=style&index=0&id=8f27612e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('el-header',[_c('h2',[_vm._v(\"XmBot\")])]),_c('el-main',{staticClass:\"text-center\"},[_c('el-card',{staticClass:\"reset-box display-inline-block\"},[_c('el-row',[_c('span',{staticClass:\"reset-title\"},[_vm._v(\"重置密码(\"+_vm._s(_vm.curUser)+\")\")])]),_c('el-form',{ref:\"resetForm\",staticClass:\"reset-form\",attrs:{\"model\":_vm.resetForm,\"label-width\":\"auto\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.resetForm.password),callback:function ($$v) {_vm.$set(_vm.resetForm, \"password\", $$v)},expression:\"resetForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码确认\",\"prop\":\"password_twice\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.resetForm.password_twice),callback:function ($$v) {_vm.$set(_vm.resetForm, \"password_twice\", $$v)},expression:\"resetForm.password_twice\"}})],1)],1),_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\",\"size\":\"small\",\"loading\":_vm.resetLoading},on:{\"click\":_vm.resetSubmit}},[_vm._v(\"确认 \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container v-loading=\"loading\">\n    <el-header>\n      <h2>XmBot</h2>\n    </el-header>\n    <el-main class=\"text-center\">\n      <el-card class=\"reset-box display-inline-block\">\n        <el-row><span class=\"reset-title\">重置密码({{curUser}})</span></el-row>\n        <el-form :model=\"resetForm\" label-width=\"auto\" :rules=\"rules\" class=\"reset-form\" ref=\"resetForm\">\n          <el-form-item label=\"新密码\" prop=\"password\">\n            <el-input v-model=\"resetForm.password\" type=\"password\" placeholder=\"请输入密码\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码确认\" prop=\"password_twice\">\n            <el-input v-model=\"resetForm.password_twice\" type=\"password\" placeholder=\"请再次输入密码\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-row>\n          <el-button type=\"primary\" icon=\"el-icon-check\" size=\"small\" :loading=\"resetLoading\" @click=\"resetSubmit\">确认\n          </el-button>\n        </el-row>\n      </el-card>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n  export default {\n    name: \"reset-pwd\",\n    data() {\n      let validPwd = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('密码不能为空'))\n        } else if (value.length < 6) {\n          callback(new Error('密码位数不能小于6位'))\n        } else {\n          callback()\n        }\n      }\n      let validPwdTwice = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('密码不能为空'))\n        } else if (value !== this.resetForm.password) {\n          callback(new Error('两次输入密码不一致'))\n        } else {\n          callback()\n        }\n      };\n      return {\n        loading: true,\n        resetForm: {\n          password: '',\n          password_twice: ''\n        },\n        rules: {\n          password: [{required: true, message: '请输入密码', trigger: 'blur'}, {validator: validPwd, trigger: 'blur'}],\n          password_twice: [\n            {required: true, message: '请再次输入密码', trigger: 'blur'},\n            {validator: validPwdTwice, trigger: 'blur'}\n          ],\n        },\n        resetLoading: false,\n        curUser: ''\n      }\n    },\n    methods: {\n      async checkQuery(query) {\n        let result = null\n        if (query.hasOwnProperty('user') && query.hasOwnProperty('salt')) {\n          this.curUser = query.user\n          await this.$ajax({\n            url: '/salt-valid',\n            params: query\n          }).then(res => {\n            if (res['code'] === 0) {\n              this.loading = false\n              result = true\n            } else this.errorAndToIndex(res['msg'])\n          }).catch(err => {\n            this.errorAndToIndex()\n          })\n        } else result = false\n        return result\n      },\n      errorAndToIndex(msg) {\n        this.$message({\n          type: \"error\",\n          message: `${msg},即将跳转到首页`,\n          duration: 1000,\n          onClose: () => {\n            this.$router.push('/index')\n          }\n        })\n      },\n      resetSubmit() {\n        this.resetLoading = true\n        this.$refs.resetForm.validate(v => {\n          if (v) {\n            this.$ajax({\n              url: '/reset-pwd',\n              params: {user_id: this.curUser, password: this.resetForm.password}\n            }).then(res => {\n              this.resetLoading = false\n              if (res['code'] === 0) {\n                this.$cookies.remove('user_info')\n                this.$cookies.remove('token')\n                this.$message({\n                  message: res['msg'],\n                  type: 'success',\n                  duration: 1000,\n                  onClose: () => {\n                    this.$router.push('/login')\n                  }\n                })\n              } else {\n                this.$message.error(res['msg'])\n              }\n            })\n          } else {\n            this.resetLoading = false\n            this.$message.warning('表单验证未通过')\n          }\n        })\n      }\n    },\n    async mounted() {\n      let query = this.$route.query\n      if (!await this.checkQuery(query)) {\n        this.errorAndToIndex('参数不正确')\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  h2 {\n    text-align: center;\n  }\n\n  .reset-box {\n    width: 400px;\n  }\n\n  .reset-title {\n    font-size: 18px;\n    line-height: 32px;\n    height: 32px;\n    display: inline-block;\n  }\n\n  .reset-form {\n    margin-top: 15px;\n    padding: 0 20px;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reset-pwd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reset-pwd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reset-pwd.vue?vue&type=template&id=8f27612e&scoped=true&\"\nimport script from \"./reset-pwd.vue?vue&type=script&lang=js&\"\nexport * from \"./reset-pwd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reset-pwd.vue?vue&type=style&index=0&id=8f27612e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f27612e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}