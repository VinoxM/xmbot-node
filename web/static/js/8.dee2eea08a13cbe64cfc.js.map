{"version":3,"sources":["webpack:///src/components/admin/reset-pwd.vue","webpack:///./src/components/admin/reset-pwd.vue?4212","webpack:///./src/components/admin/reset-pwd.vue"],"names":["reset_pwd","name","data","_this","this","loading","resetForm","password","password_twice","rules","required","message","trigger","validator","rule","value","callback","Error","length","resetLoading","curUser","methods","checkQuery","query","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","hasOwnProperty","user","$ajax","url","params","then","res","errorAndToIndex","catch","err","abrupt","stop","msg","_this3","$message","type","duration","onClose","$router","push","resetSubmit","_this4","$refs","validate","v","user_id","$cookies","remove","error","warning","mounted","_this5","_callee2","_context2","$route","sent","admin_reset_pwd","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","_v","staticClass","_s","ref","attrs","model","label-width","label","prop","placeholder","$$v","$set","icon","size","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.dee2eea08a13cbe64cfc.js","sourcesContent":["<template>\n  <el-container v-loading=\"loading\">\n    <el-header>\n      <h2>XmBot</h2>\n    </el-header>\n    <el-main class=\"text-center\">\n      <el-card class=\"reset-box display-inline-block\">\n        <el-row><span class=\"reset-title\">重置密码({{curUser}})</span></el-row>\n        <el-form :model=\"resetForm\" label-width=\"auto\" :rules=\"rules\" class=\"reset-form\" ref=\"resetForm\">\n          <el-form-item label=\"新密码\" prop=\"password\">\n            <el-input v-model=\"resetForm.password\" type=\"password\" placeholder=\"请输入密码\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码确认\" prop=\"password_twice\">\n            <el-input v-model=\"resetForm.password_twice\" type=\"password\" placeholder=\"请再次输入密码\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-row>\n          <el-button type=\"primary\" icon=\"el-icon-check\" size=\"small\" :loading=\"resetLoading\" @click=\"resetSubmit\">确认\n          </el-button>\n        </el-row>\n      </el-card>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\n  export default {\n    name: \"reset-pwd\",\n    data() {\n      let validPwd = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('密码不能为空'))\n        } else if (value.length < 6) {\n          callback(new Error('密码位数不能小于6位'))\n        } else {\n          callback()\n        }\n      }\n      let validPwdTwice = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('密码不能为空'))\n        } else if (value !== this.resetForm.password) {\n          callback(new Error('两次输入密码不一致'))\n        } else {\n          callback()\n        }\n      };\n      return {\n        loading: true,\n        resetForm: {\n          password: '',\n          password_twice: ''\n        },\n        rules: {\n          password: [{required: true, message: '请输入密码', trigger: 'blur'}, {validator: validPwd, trigger: 'blur'}],\n          password_twice: [\n            {required: true, message: '请再次输入密码', trigger: 'blur'},\n            {validator: validPwdTwice, trigger: 'blur'}\n          ],\n        },\n        resetLoading: false,\n        curUser: ''\n      }\n    },\n    methods: {\n      async checkQuery(query) {\n        let result = null\n        if (query.hasOwnProperty('user') && query.hasOwnProperty('salt')) {\n          this.curUser = query.user\n          await this.$ajax({\n            url: '/salt-valid',\n            params: query\n          }).then(res => {\n            if (res['code'] === 0) {\n              this.loading = false\n              result = true\n            } else this.errorAndToIndex(res['msg'])\n          }).catch(err => {\n            this.errorAndToIndex()\n          })\n        } else result = false\n        return result\n      },\n      errorAndToIndex(msg) {\n        this.$message({\n          type: \"error\",\n          message: `${msg},即将跳转到首页`,\n          duration: 1000,\n          onClose: () => {\n            this.$router.push('/index')\n          }\n        })\n      },\n      resetSubmit() {\n        this.resetLoading = true\n        this.$refs.resetForm.validate(v => {\n          if (v) {\n            this.$ajax({\n              url: '/reset-pwd',\n              params: {user_id: this.user_id, password: this.resetForm.password}\n            }).then(res => {\n              this.resetLoading = false\n              if (res['code'] === 0) {\n                this.$cookies.remove('user_info')\n                this.$cookies.remove('token')\n                this.$message({\n                  message: res['msg'],\n                  type: 'success',\n                  duration: 1000,\n                  onClose: () => {\n                    this.$router.push('/login')\n                  }\n                })\n              } else {\n                this.$message.error(res['msg'])\n              }\n            })\n          } else {\n            this.resetLoading = false\n            this.$message.warning('表单验证未通过')\n          }\n        })\n      }\n    },\n    async mounted() {\n      let query = this.$route.query\n      if (!await this.checkQuery(query)) {\n        this.errorAndToIndex('参数不正确')\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  h2 {\n    text-align: center;\n  }\n\n  .reset-box {\n    width: 400px;\n  }\n\n  .reset-title {\n    font-size: 18px;\n    line-height: 32px;\n    height: 32px;\n    display: inline-block;\n  }\n\n  .reset-form {\n    margin-top: 15px;\n    padding: 0 20px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/admin/reset-pwd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('el-header',[_c('h2',[_vm._v(\"XmBot\")])]),_vm._v(\" \"),_c('el-main',{staticClass:\"text-center\"},[_c('el-card',{staticClass:\"reset-box display-inline-block\"},[_c('el-row',[_c('span',{staticClass:\"reset-title\"},[_vm._v(\"重置密码(\"+_vm._s(_vm.curUser)+\")\")])]),_vm._v(\" \"),_c('el-form',{ref:\"resetForm\",staticClass:\"reset-form\",attrs:{\"model\":_vm.resetForm,\"label-width\":\"auto\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.resetForm.password),callback:function ($$v) {_vm.$set(_vm.resetForm, \"password\", $$v)},expression:\"resetForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码确认\",\"prop\":\"password_twice\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.resetForm.password_twice),callback:function ($$v) {_vm.$set(_vm.resetForm, \"password_twice\", $$v)},expression:\"resetForm.password_twice\"}})],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\",\"size\":\"small\",\"loading\":_vm.resetLoading},on:{\"click\":_vm.resetSubmit}},[_vm._v(\"确认\\n        \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-298f1ff6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/admin/reset-pwd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-298f1ff6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./reset-pwd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./reset-pwd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./reset-pwd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-298f1ff6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./reset-pwd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-298f1ff6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/admin/reset-pwd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}