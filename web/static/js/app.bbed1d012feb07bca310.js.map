{"version":3,"sources":["webpack:///./src/api/base.js","webpack:///src/components/others/url-prefix-conf.vue","webpack:///./src/components/others/url-prefix-conf.vue?5a32","webpack:///./src/components/others/url-prefix-conf.vue","webpack:///src/App.vue","webpack:///./src/App.vue?281a","webpack:///./src/App.vue","webpack:///./src/store/index.js","webpack:///./src/socket/index.js","webpack:///./src/main.js","webpack:///./src/router/index.js","webpack:///./src/api/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getBaseSetting","getBotApi","saveBaseSetting","__WEBPACK_IMPORTED_MODULE_0__index__","ajax","url","method","params","data","url_prefix_conf","name","urlConf","this","$urlConf","baseUrlPrefix","urlShow","settingShow","rightShow","computed","positionClass","methods","prefixChanged","val","updateBaseUrl","window","location","reload","hide","rightArrowShow","mounted","curUrlPrefix","$cookies","get","others_url_prefix_conf","render","_vm","_h","$createElement","_c","_self","class","on","mouseleave","mouseenter","directives","rawName","value","expression","attrs","content","placement","staticClass","click","$event","_v","size","change","model","callback","$$v","label","staticRenderFns","App","components","url-conf","normalizeComponent","ssrContext","isAdmin","$store","state","created","selectortype_template_index_0_src_App","id","src_App","App_normalizeComponent","Vue","use","Vuex","store","Store","calendar_setting","chatLog","private","group","mutations","updateIsAdmin","updateCalendar","flushChatLog","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","prop","hasOwnProperty","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","keys_default","key","elem","err","return","pushChatLog","r","split","rows","push","hasNew","newCount","noMore","appendChatLog","concat","toConsumableArray_default","length","ws","timeInterval","recon_count","defaultPrefix","base","dev","pro","socket","send","msg","close","ready","isConnecting","connect","vue","createWs","console","log","curPrefix","WebSocket","onopen","onerror","onclose","clearTimeout","setTimeout","reconnect","onmessage","event","JSON","parse","type","commit","init","component","e","then","bind","config","productionTip","ElementUi","VueCookies","VueECharts","prototype","$ajax","$ws","router","template","checkAuth","prefix","changeAjaxBaseUrl","set","addAjaxInterceptors","checkIsAdmin","catch","res","$botApi","$mount","userId","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","user_id","Router","menuDict","title","icon","path","Promise","all","meta","auth","noAuthHidden","routes","redirect","children","token","salt","$message","message","duration","onClose","defaults","baseURL","_this","interceptors","request","headers","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default","response","_ref","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","mark","_callee","wrap","_context","prev","$router","stop","apply","arguments","require","default","base_url","dev_url","pro_url"],"mappings":"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","file":"static/js/app.bbed1d012feb07bca310.js","sourcesContent":["import {ajax} from './index'\n\nexport const getBaseSetting = () => ajax({url: '/setting/default.json', method: 'get'})\nexport const getBotApi = () => ajax({url: '/getBotApi.json', method: 'get'})\n\nexport const saveBaseSetting = (params) => ajax({url: '/setting/default.save', method: 'post', data: params})\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/base.js","<template>\n  <div @mouseleave=\"hide\" @mouseenter=\"rightArrowShow\" :class=\"positionClass\">\n    <span v-show=\"!urlShow\">\n      <span v-if=\"!settingShow\">\n        <i class=\"el-icon-arrow-left setting-icon\" @click=\"settingShow=true\"></i>\n      </span>\n      <span v-else>\n        <el-tooltip content=\"url前缀设置\" placement=\"top\">\n          <i class=\"el-icon-setting setting-icon\" @click=\"urlShow=true\"></i>\n        </el-tooltip>\n        <i class=\"el-icon-arrow-right setting-icon\" v-show=\"rightShow\" @click=\"settingShow=false\"></i>\n      </span>\n    </span>\n<!--    <transition name=\"fade\">-->\n      <el-radio-group v-model=\"baseUrlPrefix\" v-show=\"urlShow\" @change=\"prefixChanged\" size=\"small\">\n        <el-tooltip :content=\"`默认前缀:${urlConf.base_url}`\" placement=\"top\">\n          <el-radio-button label=\"base\">base</el-radio-button>\n        </el-tooltip>\n        <el-tooltip :content=\"`开发前缀:${urlConf.dev_url}`\" placement=\"top\">\n          <el-radio-button label=\"dev\">dev</el-radio-button>\n        </el-tooltip>\n        <el-tooltip :content=\"`服务器前缀:${urlConf.pro_url}`\" placement=\"top\">\n          <el-radio-button label=\"pro\">pro</el-radio-button>\n        </el-tooltip>\n      </el-radio-group>\n<!--    </transition>-->\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"url-prefix-conf\",\n    data() {\n      return {\n        urlConf: this.$urlConf,\n        baseUrlPrefix: '',\n        urlShow: false,\n        settingShow: false,\n        rightShow: false,\n      }\n    },\n    computed: {\n      positionClass() {\n        if (this.settingShow) {\n          if (this.urlShow) {\n            return 'position-fixed right-10'\n          } else\n            return this.rightShow ? 'position-fixed right-0' : 'position-fixed right-10'\n        } else {\n          return 'position-fixed right-0'\n        }\n      }\n    },\n    methods: {\n      prefixChanged(val) {\n        this.updateBaseUrl(val)\n        window.location.reload()\n      },\n      hide() {\n        this.urlShow = false\n        this.rightShow = false\n      },\n      rightArrowShow() {\n        this.rightShow = true\n      }\n    },\n    mounted() {\n      let curUrlPrefix = this.$cookies.get('curUrlPrefix')\n      this.baseUrlPrefix = curUrlPrefix ? curUrlPrefix : 'base'\n    }\n  }\n</script>\n\n<style scoped>\n  .setting-icon {\n    display: inline-block;\n    cursor: pointer;\n    line-height: 32px;\n    font-size: 18px;\n    height: 32px;\n    width: 24px;\n  }\n\n  .setting-icon:hover {\n    color: #ffffff;\n    background-color: #66b1ff;\n    border-radius: 4px;\n  }\n\n  .position-fixed {\n    position: fixed;\n    display: inline;\n    bottom: 10px;\n    text-align: center;\n  }\n\n  .right-10 {\n    right: 28px\n  }\n\n  .right-0 {\n    right: 0\n  }\n\n  .fade-enter-active, .fade-leave-active {\n    transition: opacity .5s;\n  }\n\n  .fade-enter, .fade-leave-to {\n    opacity: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/others/url-prefix-conf.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.positionClass,on:{\"mouseleave\":_vm.hide,\"mouseenter\":_vm.rightArrowShow}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.urlShow),expression:\"!urlShow\"}]},[(!_vm.settingShow)?_c('span',[_c('i',{staticClass:\"el-icon-arrow-left setting-icon\",on:{\"click\":function($event){_vm.settingShow=true}}})]):_c('span',[_c('el-tooltip',{attrs:{\"content\":\"url前缀设置\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-setting setting-icon\",on:{\"click\":function($event){_vm.urlShow=true}}})]),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rightShow),expression:\"rightShow\"}],staticClass:\"el-icon-arrow-right setting-icon\",on:{\"click\":function($event){_vm.settingShow=false}}})],1)]),_vm._v(\" \"),_c('el-radio-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.urlShow),expression:\"urlShow\"}],attrs:{\"size\":\"small\"},on:{\"change\":_vm.prefixChanged},model:{value:(_vm.baseUrlPrefix),callback:function ($$v) {_vm.baseUrlPrefix=$$v},expression:\"baseUrlPrefix\"}},[_c('el-tooltip',{attrs:{\"content\":(\"默认前缀:\" + (_vm.urlConf.base_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"base\"}},[_vm._v(\"base\")])],1),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"content\":(\"开发前缀:\" + (_vm.urlConf.dev_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"dev\"}},[_vm._v(\"dev\")])],1),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"content\":(\"服务器前缀:\" + (_vm.urlConf.pro_url)),\"placement\":\"top\"}},[_c('el-radio-button',{attrs:{\"label\":\"pro\"}},[_vm._v(\"pro\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1cf41455\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/others/url-prefix-conf.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1cf41455\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./url-prefix-conf.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./url-prefix-conf.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./url-prefix-conf.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1cf41455\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./url-prefix-conf.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1cf41455\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/others/url-prefix-conf.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\" class=\"text-left\">\n    <router-view/>\n    <url-conf></url-conf>\n  </div>\n</template>\n\n<script>\n  import urlConf from './components/others/url-prefix-conf'\n\n  export default {\n    name: 'App',\n    components: {\n      'url-conf': urlConf\n    },\n    computed: {\n      isAdmin() {\n        return this.$store.state.isAdmin\n      }\n    },\n    data() {\n      return {}\n    },\n    created() {\n      let user_id = this.$cookies.get('user_id')\n    }\n  }\n</script>\n\n<style>\n  #app {\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    /*text-align: center;*/\n    color: #2c3e50;\n    /*margin-top: 60px;*/\n  }\n\n  label.el-form-item__label:after {\n    content: ': ';\n  }\n\n  .text-center {\n    text-align: center !important;\n  }\n\n  .text-left {\n    text-align: left !important;\n  }\n\n  .text-right {\n    text-align: right !important;\n  }\n\n  .display-inline-block {\n    display: inline-block;\n  }\n\n  .display-block {\n    display: block;\n  }\n\n  .el-tooltip__popper.is-light {\n    border: 1px solid #b5b5b5 !important;\n  }\n\n  .float-right {\n    float: right;\n  }\n\n  body {\n    margin: 0;\n  }\n\n  .position-relative {\n    position: relative;\n  }\n\n  .position-absolute {\n    position: absolute;\n  }\n\n  .cur-pointer{\n    cursor: pointer;\n  }\n\n  .cur-default{\n    cursor: default;\n  }\n\n  .cur-not-allowed{\n    cursor: not-allowed;\n  }\n\n  .css-hide{\n    display: none !important;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-left\",attrs:{\"id\":\"app\"}},[_c('router-view'),_vm._v(\" \"),_c('url-conf')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d775e3c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d775e3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d775e3c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vuex from 'vuex'\nimport Vue from 'vue'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    isAdmin: false,\n    calendar_setting: {},\n    chatLog: {private: {}, group: {}}\n  },\n  mutations: {\n    updateIsAdmin(state, value) {\n      state.isAdmin = value\n    },\n    updateCalendar(state, value) {\n      state.calendar_setting = value\n    },\n    flushChatLog(state, data) {\n      let property = ['private','group']\n      for (const prop of property) {\n        if (data.hasOwnProperty(prop)){\n          for (const key of Object.keys(data[prop])) {\n            let elem = data[prop][key]\n            if (!state.chatLog[prop].hasOwnProperty(key)) {\n              state.chatLog[prop][key] = elem\n            }\n          }\n        }\n      }\n    },\n    pushChatLog(state, data) {\n      let r = data['tableName'].split('_')\n      if (state.chatLog[r[0]][r[1]+'_'+r[2]]) {\n        state.chatLog[r[0]][r[1]+'_'+r[2]].rows.push(data)\n        state.chatLog[r[0]][r[1]+'_'+r[2]].hasNew = true\n        state.chatLog[r[0]][r[1]+'_'+r[2]].newCount ++\n      }\n      else state.chatLog[r[0]][r[1]+'_'+r[2]] = {rows: [data], noMore: false,hasNew: true,newCount: 1}\n    },\n    appendChatLog(state, data) {\n      let r = data['tableName'].split('_')\n      if (state.chatLog[r[0]][r[1]+'_'+r[2]]) {\n        state.chatLog[r[0]][r[1]+'_'+r[2]].rows = [...data.rows, ...state.chatLog[r[0]][r[1]+'_'+r[2]].rows]\n        state.chatLog[r[0]][r[1]+'_'+r[2]].noMore = data.rows.length < 20\n      } else state.chatLog[r[0]][r[1]+'_'+r[2]] = {rows: [data], noMore: false,hasNew: false}\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import ca from \"element-ui/src/locale/lang/ca\";\n\nlet ws;\nlet timeInterval;\nlet recon_count = 0;\n\nconst defaultPrefix = 'pro'\n\nconst port = 9220\n\nconst urlConf = {\n  base: `ws://121.41.225.90:${port}/`,\n  dev: `ws://127.0.0.1:${port}/`,\n  pro: `ws://121.41.225.90:${port}/`\n}\n\nexport const socket = {\n  send: (msg) => ws.send(msg),\n  close: () => ws.close(),\n  ready: false,\n  isConnecting: false,\n  connect: (vue) => createWs(vue)\n}\n\n\nexport function createWs(vue) {\n  console.log(`${recon_count === 0 ? 'ws connecting' : `ws reconnection [${recon_count} times]`}`)\n  if (ws) ws.close()\n  socket.isConnecting = true\n  let curPrefix = vue.$cookies.get('curUrlPrefix')\n  const url = urlConf[curPrefix?curPrefix:defaultPrefix]\n  ws = new WebSocket(url)\n  init(vue)\n}\n\nfunction init(vue) {\n  ws.onopen = () => {\n    socket.isConnecting = false\n    socket.ready = true\n    recon_count = 0\n    console.log('ws connected')\n  }\n\n  ws.onerror = () => {\n    socket.isConnecting = false\n    socket.ready = false\n    console.log(`ws connect error${recon_count < 3 ? ',reconnect in 2s later' : ',refresh page to reconnect'}`)\n    // reconnect(vue)\n  }\n\n  ws.onclose = () => {\n    console.log('ws closed')\n    socket.isConnecting = false\n    socket.ready = false\n    // recon_count = 0\n    reconnect(vue)\n  }\n\n  ws.onmessage = (event) => {\n    let data = JSON.parse(event.data)\n    console.log(data)\n    switch (data.type) {\n      case 'all':\n        vue.$store.commit('flushChatLog', data.data)\n        break\n      case 'elem':\n        vue.$store.commit('pushChatLog', data.data)\n        break\n      case 'more':\n        vue.$store.commit('appendChatLog', data.data)\n        break\n    }\n  }\n}\n\nfunction reconnect(vue) {\n  recon_count++\n  if (socket.isConnecting || socket.ready || recon_count > 3) return\n  timeInterval && clearTimeout(timeInterval)\n  timeInterval = setTimeout(() => {\n    createWs(vue)\n  }, 2000)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/socket/index.js","import Vue from 'vue'\nimport App from './App'\nimport {checkAuth, checkIsAdmin, router} from './router'\nimport ElementUi from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport {addAjaxInterceptors, ajax, changeAjaxBaseUrl, urlConf} from './api'\nimport VueCookies from 'vue-cookies'\nimport store from './store/index'\nimport {createWs, socket} from './socket/index'\nimport VueECharts from 'v-charts'\nimport {getBotApi} from './api/base'\n\nVue.component('xm-tags',()=>import('./components/tools/xm-tags'))\nVue.component('xm-info-box',()=>import('./components/tools/xm-info-box'))\n\nVue.config.productionTip = false\nVue.use(ElementUi)\nVue.use(VueCookies)\nVue.use(VueECharts)\n\nVue.prototype.$ajax = ajax\nVue.prototype.$urlConf = urlConf\nVue.prototype.$ws = socket\n\nconst vue = new Vue({\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\nVue.prototype.checkAuth = () => checkAuth(vue)\nVue.prototype.updateBaseUrl = (prefix) => {\n  changeAjaxBaseUrl(prefix)\n  vue.$cookies.set('curUrlPrefix',prefix)\n}\n\naddAjaxInterceptors(vue)\n\nchangeAjaxBaseUrl(vue.$cookies.get('curUrlPrefix'))\n\ncheckIsAdmin(vue).then(()=>{\n  vue.$store.commit('updateIsAdmin',true)\n}).catch(()=>{\n  vue.$store.commit('updateIsAdmin',false)\n})\n\ncreateWs(vue)\n\ngetBotApi().then(res=>{\n  Vue.prototype.$botApi = res.data\n})\n\n// addRouterInterceptor()\n\n// 最后再绑定页面,确保前面所有操作已经完成后,再加载页面\nvue.$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport const menuDict = [\n  {\n    title:'基础设置',\n    icon:'el-icon-setting',\n    path: '/base-setting',\n    name: 'base-setting',\n    component: () => import('../components/base/base-setting')\n  },\n  {\n    title:'帮助手册',\n    icon:'el-icon-notebook-2',\n    path: '/plugins-dict',\n    name: 'plugins-dict',\n    component: () => import('../components/others/plugins-dict')\n  },\n  {\n    title:'复读设置',\n    icon:'el-icon-printer',\n    path: '/repeat-setting',\n    name: 'repeat-setting',\n    component: () => import('../components/repeat/repeat-setting')\n  },\n  {\n    title:'Chat设置',\n    icon:'el-icon-chat-round',\n    path: '/chat-setting',\n    name: 'chat-setting',\n    component: () => import('../components/chat/chat-setting')\n  },\n  {\n    title:'RSS设置',\n    icon:'el-icon-paperclip',\n    path: '/rss-setting',\n    name: 'rss-setting',\n    component: () => import('../components/rss/rss-setting')\n  },\n  {\n    title:'Live设置',\n    icon:'el-icon-video-play',\n    path: '/live-setting',\n    name: 'live-setting',\n    meta: {auth: true, noAuthHidden:true},\n    component: () => import('../components/live/live-setting')\n  },\n  {\n    title:'聊天人偶',\n    icon:'el-icon-chat-line-square',\n    path: '/chat-puppet',\n    name: 'chat-puppet',\n    meta: {auth: true, noAuthHidden:true},\n    component: () => import('../components/others/socket-chat')\n  },\n  {\n    title:'PCR卡池设置',\n    icon:'el-icon-s-custom',\n    path: '/gacha/pcr/pool-setting',\n    name: 'pcr-pool-setting',\n    meta: {auth: false},\n    component: () => import('../components/gacha/pcr-pool-setting')\n  },\n  {\n    title:'PCR活动日历',\n    icon:'el-icon-date',\n    path: '/calendar-pcr',\n    name: 'calendar-pcr',\n    component: () => import('../components/calendar/pcr-calendar')\n  },\n  {\n    title:'PCR日历设置',\n    icon:'el-icon-position',\n    path: '/calendar-setting',\n    name: 'calendar-setting',\n    component: () => import('../components/calendar/pcr-calendar-setting')\n  }\n]\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/index'\n  },\n  {\n    path: '*',\n    redirect: '/404'\n  },\n  {\n    path: '/404',\n    name: '404',\n    component: () => import('../components/404')\n  },\n  {\n    path: '/index',\n    name: 'Index',\n    component: () => import('../components/index'),\n    redirect: '/home',\n    children:[\n      {\n        title:'首页',\n        icon:'',\n        path: '/home',\n        name: 'home',\n        component: () => import('../components/home')\n      },...menuDict]\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('../components/admin/login')\n  },\n  {\n    path: '/reset-pwd',\n    name: 'resetPassword',\n    component: () => import('../components/admin/reset-pwd')\n  }\n]\n\nexport const router = new Router({\n  routes: routes\n})\n\nexport function addRouterInterceptor() {\n  router.beforeEach((to, from, next) => {\n    if (to.matched.some(m => m.meta && m.meta.auth)) {\n      checkAuth().then(() => next()).catch(err => next(err))\n    } else {\n      next()\n    }\n  })\n}\n\nexport function checkAuth(vue) {\n  return new Promise((resolve, reject) => {\n    let token = vue.$cookies.get('token')\n    let salt = vue.$cookies.get('salt')\n    if (token && salt) {\n      vue.$ajax({\n        url: '/token.valid',\n        params: {token: token, salt: salt}\n      }).then(res => {\n        if (res['code'] === 0) {\n          resolve()\n        } else {\n          vue.$message({\n            type: 'error',\n            message: res['msg'],\n            duration: 1000,\n            onClose: () => {\n              reject('/login')\n            }\n          })\n        }\n      }).catch(e => {\n        reject('/index')\n      })\n    } else {\n      vue.$message({\n        type: 'error',\n        message: '未登录',\n        duration: 1000,\n        onClose: () => {\n          reject('/login')\n        }\n      })\n    }\n  })\n}\n\nexport function checkIsAdmin(vue, userId) {\n  return new Promise((resolve, reject) => {\n    let user_id = userId ? userId : vue.$cookies.get('user_id')\n    if (user_id) {\n      vue.$ajax({url: '/checkIsAdmin.valid', params: {user_id: user_id}})\n        .then(res => {\n          if (res['code'] === 0) {\n            resolve()\n          } else reject()\n        })\n        .catch(err => {\n          reject()\n        })\n    } else\n      reject()\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","export const ajax = require('axios').default\nimport Qs from 'qs'\n\nexport const urlConf = {\n  base_url: '/',\n  dev_url: 'http://127.0.0.1:9221/',\n  pro_url: 'http://121.4.130.205:9221/',\n}\n\nconst defaultPrefix = 'base'\n// const defaultPrefix = 'dev'\n// const defaultPrefix = 'pro'\n\nexport function changeAjaxBaseUrl(prefix) {\n  ajax.defaults.baseURL = urlConf[(prefix?prefix:defaultPrefix)+'_url']\n}\n\nexport function addAjaxInterceptors(vue){\n  ajax.interceptors.request.use(config => {\n    let salt = vue.$cookies.get('salt')\n    let token = vue.$cookies.get('token')\n    let user_id = vue.$cookies.get('user_id')\n    config.headers.token = token?token:''\n    config.headers.salt = salt?salt:''\n    config.headers.user_id = user_id?user_id:''\n    // config.data = Qs.stringify(config.data)\n    return config\n  },err => {\n    vue.$message({\n      type:'error',\n      message:'请求出错'\n    })\n    return Promise.reject(err)\n  })\n\n  ajax.interceptors.response.use(res => {\n    if (res.data['code']===400||res.data['code']===403){\n      vue.$message({\n        type:'error',\n        message:res.data['msg'],\n        duration:1000,\n        onClose: async () => {\n          await vue.$router.push('/login')\n        }\n      })\n      return Promise.reject('')\n    }else {\n      return res.data\n    }\n  },err => {\n    vue.$message({\n      type:'error',\n      message:'服务器出错'\n    })\n    return Promise.reject(err)\n  })\n}\n\nexport default ajax\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js"],"sourceRoot":""}