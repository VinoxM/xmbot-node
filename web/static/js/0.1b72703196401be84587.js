webpackJsonp([0],{"+Ajd":function(e,t){},"3VHW":function(e,t){},BO1k:function(e,t,s){e.exports={default:s("fxRn"),__esModule:!0}},Cdx3:function(e,t,s){var i=s("sB3e"),o=s("lktj");s("uqUo")("keys",function(){return function(e){return o(i(e))}})},DKKw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("BO1k"),o=s.n(i),n=s("fZjL"),r=s.n(n),a=s("mvHQ"),l=s.n(a),p=s("gyMJ"),c={name:"pcr-character-add",props:["visible"],data:function(){var e=this;return{visible_:!1,form:{type:"normal",star:"1",num:"",jp_name:"",cn_name:"",nickNames:"",imgUrl:""},imgLoadError:!1,uploadFile:null,imgBoxHover:!1,submitLoading:!1,rules:{imgUrl:[{required:!0,message:"请上传缩略图",trigger:"change"},{validator:function(t,s,i){if(s){if(""===s)return void i(new Error("请上传缩略图"));if(s.startsWith("https://redive.estertion.win/icon/unit/")&&e.imgLoadError)return void i(new Error("请上传缩略图"));i()}else i()},trigger:"change"}]}}},watch:{visible:function(e){this.visible_=e}},methods:{initForm:function(){this.form={type:"normal",star:"1",num:"",jp_name:"",cn_name:"",nickNames:"",imgUrl:""}},numChange:function(){""===this.form.num?this.form.imgUrl="":this.form.imgUrl="https://redive.estertion.win/icon/unit/"+this.form.num+("3"===this.form.star?"3":"1")+"1.webp"},uploadChange:function(e){var t=e.target.files;t.length>0&&"image"===t[0].type.substring(0,5)?(this.uploadFile=t[0],this.form.imgUrl=URL.createObjectURL(t[0])):this.uploadDelete()},uploadDelete:function(){this.uploadFile=null,this.numChange(),this.$refs.uploadInput.value=""},submit:function(){var e=this;this.submitLoading=!0,this.$refs.form.validate(function(t){if(t){var s=new FormData;s.append("type",e.form.type),s.append("star","star"+e.form.star),s.append("num",e.form.num),s.append("nickNames",e.form.nickNames.split("|")),e.form.imgUrl.startsWith("https://redive.estertion.win/icon/unit/")||s.append("image",e.uploadFile),(i=s,Object(p.d)({url:"/setting/pcr-nickNames.save",method:"post",data:i,processData:!1,contentType:!1})).then(function(e){console.log(e)}).catch(function(e){})}else e.$message.warning("表单验证未通过"),e.submitLoading=!1;var i})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.visible_,title:"添加角色",center:"","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.visible_=t},close:function(t){return e.$emit("update:visible",!1)},closed:e.initForm}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[s("el-form-item",{attrs:{prop:"type",label:"角色类型",rules:[{required:!0,message:"请选择角色类型",trigger:"blur"}]}},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[s("el-radio-button",{attrs:{label:"normal"}},[e._v("常驻")]),e._v(" "),s("el-radio-button",{attrs:{label:"limited"}},[e._v("限定")]),e._v(" "),s("el-radio-button",{attrs:{label:"hidden"}},[e._v("隐藏")])],1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"star",label:"角色星级",rules:[{required:!0,message:"请选择角色星级",trigger:"blur"}]}},[s("el-radio-group",{attrs:{size:"small"},on:{change:e.numChange},model:{value:e.form.star,callback:function(t){e.$set(e.form,"star",t)},expression:"form.star"}},[s("el-radio",{attrs:{label:"1"}},[e._v("★")]),e._v(" "),s("el-radio",{attrs:{label:"2"}},[e._v("★★")]),e._v(" "),s("el-radio",{attrs:{label:"3"}},[e._v("★★★")])],1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"num",label:"数字代号",rules:[{required:!0,message:"请输入角色数字代号",trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请输入角色数字代号"},on:{change:e.numChange},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"jp_name",label:"日文名称",rules:[{required:!0,message:"请输入角色日文名称",trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请输入角色日文名称"},model:{value:e.form.jp_name,callback:function(t){e.$set(e.form,"jp_name",t)},expression:"form.jp_name"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"cn_name",label:"中文名称",rules:[{required:!0,message:"请输入角色中文名称",trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请输入角色中文名称"},model:{value:e.form.cn_name,callback:function(t){e.$set(e.form,"cn_name",t)},expression:"form.cn_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{attrs:{placeholder:"请输入角色昵称,多个用分隔号'|'隔开"},model:{value:e.form.nickNames,callback:function(t){e.$set(e.form,"nickNames",t)},expression:"form.nickNames"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"imgUrl",label:"角色预览图"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.uploadFile,expression:"uploadFile===null"}],staticClass:"upload-img-box",on:{mouseenter:function(t){e.imgBoxHover=!0},mouseleave:function(t){e.imgBoxHover=!1}}},[s("el-image",{staticClass:"img-view",attrs:{src:e.form.imgUrl,fit:"fill"},on:{error:function(t){e.imgLoadError=!0},load:function(t){e.imgLoadError=!1}}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n            加载中"),s("span",[e._v("...")])]),e._v(" "),s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("span",{staticStyle:{"font-size":"12px"}},[e._v("加载失败")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.imgBoxHover,expression:"imgBoxHover"}],staticClass:"upload-img-box-model"},[s("el-row",{staticClass:"model-icon-box"},[s("i",{staticClass:"el-icon-upload model-icon",on:{click:function(t){return e.$refs.uploadInput.click()}}})])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.uploadFile,expression:"uploadFile!=null"}],staticClass:"upload-img-box",on:{mouseenter:function(t){e.imgBoxHover=!0},mouseleave:function(t){e.imgBoxHover=!1}}},[s("el-image",{staticClass:"img-view",attrs:{src:e.form.imgUrl,fit:"fill"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.imgBoxHover,expression:"imgBoxHover"}],staticClass:"upload-img-box-model"},[s("el-row",{staticClass:"model-icon-box"},[s("i",{staticClass:"el-icon-upload model-icon",on:{click:function(t){return e.$refs.uploadInput.click()}}}),e._v(" "),s("i",{staticClass:"el-icon-delete model-icon",on:{click:e.uploadDelete}})])],1)],1),e._v(" "),s("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg"},on:{change:e.uploadChange}})])],1),e._v(" "),s("form",{attrs:{action:"/setting/pcr-nickNames.save",enctype:"multipart/form-data",method:"post"}},[s("input",{attrs:{type:"file",multiple:"",name:"upload"}}),e._v(" "),s("input",{attrs:{type:"submit",value:"upload"}})]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.submit}},[e._v("提交")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible_=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var m={name:"pcr-pool-setting",components:{"char-add":s("VU/8")(c,u,!1,function(e){s("3VHW")},"data-v-1fac1e63",null).exports},data:function(){return{isAdmin:!1,charAddVisible:!1,loading:!0,imgWidth:{width:"96px"},spanStyle:{fontSize:"12px",height:"18px",lineHeight:"18px"},bodyStyle:{padding:"15px 5px"},profiles:{settings:null,pools:null,character:null},nickName_on:!1,prop_on:!1,hidden_unsel:!1,character:null,sel_normal:null,sel_pick_up:null,pool_prop:null,charNames:null,activePool:"pool_jp",poolName:{pool_jp:"日服卡池",pool_tw:"台服卡池",pool_cn:"国服卡池",others:"其他设置"},activeStars:{pool_jp:["star3"],pool_tw:["star3"],pool_cn:["star3"]},poolTitle:{star3:"SSR",star2:"SR",star1:"R",hidden:"Hidden"},drawer:!1,checkTop:!1,lang_cn:!1,inputVisible_1:!1,inputValue_1:"",inputVisible_2:!1,inputValue_2:"",inputVisible_3:!1,inputValue_3:"",inputVisible_4:!1,inputValue_4:"",inputVisible_5:!1,inputValue_5:""}},computed:{suf:function(){return this.star<3?1:3},lang:function(){return this.lang_cn?1:0}},mounted:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},beforeDestroy:function(){this.handleResize()},methods:{handleResize:function(){this.fullWidth=document.documentElement.clientWidth,this.fullWidth>800?(this.imgWidth.width="96px",this.checkTop=!0,this.spanStyle={fontSize:"12px",height:"18px",lineHeight:"18px"},this.tabPosition="top",this.bodyStyle.padding="20px",this.poolName={pool_jp:"日服卡池",pool_tw:"台服卡池",pool_cn:"国服卡池",others:"其他设置"}):(this.imgWidth.width="72px",this.checkTop=!1,this.spanStyle={fontSize:"9px",height:"16px",lineHeight:"16px"},this.tabPosition="left",this.bodyStyle.padding="15px 5px",this.poolName={pool_jp:"JP",pool_tw:"TW",pool_cn:"CN",others:""})},getSettings:function(){var e=this,t=this;Object(p.d)({url:"/setting/pcr.json",method:"get"}).then(function(t){return e.profiles.settings=t.data}),Object(p.d)({url:"/setting/pcr/pools.json",method:"get"}).then(function(e){t.profiles.pools=e.data,Object(p.d)({url:"/setting/pcr/character.json",method:"get"}).then(function(s){t.profiles.character=s.data;var i=e.data,o=s.data,n={pool_jp:{},pool_tw:{},pool_cn:{}},a={},p={pool_jp:{star1:[],star2:[],star3:[]},pool_tw:{star1:[],star2:[],star3:[]},pool_cn:{star1:[],star2:[],star3:[]}},c={pool_jp:{star1:{},star2:{},star3:{}},pool_tw:{star1:{},star2:{},star3:{}},pool_cn:{star1:{},star2:{},star3:{}}},u={pool_jp:{star1:0,star2:0,star3:0},pool_tw:{star1:0,star2:0,star3:0},pool_cn:{star1:0,star2:0,star3:0}};for(var m in n){var _={star1:{pool:{}},star2:{pool:{}},star3:{pool:{}}};for(var d in n[m]=JSON.parse(l()(o)),i[m].pools)if(i[m].pools.hasOwnProperty(d)&&d.length>6)for(var f=i[m].pools[d],h=String(f.prefix).split("★").length-1,v=0;v<f.pool.length;v++)_["star"+h].pool[f.pool[v]]={prop:f.prop/f.pool.length,prop_last:f.prop_last/f.pool.length,free_stone:-1!==f.free_stone.indexOf(f.pool[v])};for(var g in o)if(o.hasOwnProperty(g))for(var k in o[g])if(o[g].hasOwnProperty(k))for(var b in o[g][k])if(o[g][k].hasOwnProperty(b)){u[m][k]=i[m].pools[k].prop;var x=!1,y=0,w=0,C=!1,N=!1;if(-1!==i[m].pools[k].pool.indexOf(b))x=!0,p[m][k].push(b),y=i[m].pools[k].prop/i[m].pools[k].pool.length/10,w=i[m].pools[k].prop_last/i[m].pools[k].pool.length/10;else if(_[k].pool&&-1!==r()(_[k].pool).indexOf(b)){x=!0,y=_[k].pool[b].prop/10,w=_[k].pool[b].prop_last/10,C=!0,N=_[k].pool[b].free_stone,c[m][k][b]={prop:y.toFixed(3),free_stone:N}}y=y.toFixed(3)+"%",w=w.toFixed(3)+"%",n[m][g][k][b]={id:b,name:o[g][k][b],sel:x,prop:y,prop_last:w,pick_up:C,free_stone:N},a[b]||(a[b]=o[g][k][b])}}t.character=n,t.sel_normal=p,t.sel_pick_up=c,t.pool_prop=u,t.charNames=a,t.loading=!1})})},prop_computed:function(e,t,s,i,o,n){return e?t?this.sel_pick_up[s][i][n].prop+"%":(this.pool_prop[s][i]/this.sel_normal[s][i].length/10).toFixed(3)+"%":"0.000%"},getSrc:function(e,t){var s=this.$cookies.get("curUrlPrefix");return(s?this.$urlConf[s+"_url"]:this.$urlConf.base_url)+"xmbot/resource/icon/unit/"+e.id+("star3"===t?"3":"1")+"1.jpg"},toggleSel:function(e,t,s,i){if(this.character[e][t][s][i].sel=!this.character[e][t][s][i].sel,this.character[e][t][s][i].sel)this.sel_normal[e][s].push(i);else if(this.character[e][t][s][i].pick_up)this.character[e][t][s][i].pick_up=!1,delete this.sel_pick_up[e][s][i],this.handlePickProp(e,t,s,i);else{var o=this.sel_normal[e][s].indexOf(i);this.sel_normal[e][s].splice(o,1)}},togglePickCheck:function(e,t,s,i){var o=this,n=0,a=!1;if("star2"===s&&!this.character[e][t][s][i].pick_up){var l=r()(this.sel_pick_up[e][s]);l.length>=1&&(a=!0,n=5/(l.length+1),this.$prompt("请输入概率:","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:n.toFixed(3),inputValidator:function(e){return!!(/[0-9]*[.][0-9]{3}/.test(e)&&Number(e)-5<0&&Number(e)>0)||"请输入大于0,小于5的三位小数"}}).then(function(r){var a=r.value;n=a,o.togglePick(e,t,s,i,n)}).catch(function(e){}))}a||this.togglePick(e,t,s,i,n)},togglePick:function(e,t,s,i,o){if(this.character[e][t][s][i].pick_up=!this.character[e][t][s][i].pick_up,this.character[e][t][s][i].pick_up){var n=this.sel_normal[e][s].indexOf(i);this.sel_normal[e][s].splice(n,1),this.sel_pick_up[e][s][i]=0===o?{prop:0,free_stone:!1}:{prop:o,free_stone:!1},this.character[e][t][s][i].prop=Number(this.sel_pick_up[e][s][i].prop).toFixed(3)+"%"}else this.sel_normal[e][s].push(i),this.character[e][t][s][i].prop=Number(this.sel_pick_up[e][s][i].prop).toFixed(3)+"%",this.character[e][t][s][i].free_stone=!1,delete this.sel_pick_up[e][s][i];this.handlePickProp(e,t,s,i)},handlePickProp:function(e,t,s,i){if("star3"===s){var n=(7/r()(this.sel_pick_up[e][s]).length/10).toFixed(3),a=!0,l=!1,p=void 0;try{for(var c,u=o()(r()(this.sel_pick_up[e][s]));!(a=(c=u.next()).done);a=!0){var m=c.value;this.sel_pick_up[e][s][m].prop=n}}catch(e){l=!0,p=e}finally{try{!a&&u.return&&u.return()}finally{if(l)throw p}}this.character[e][t][s][i].prop=n+"%"}else if("star2"===s){var _=0,d=this.character[e][t][s][i].pick_up,f=r()(this.sel_pick_up[e][s]);_=d?1===f.length?"5.000":this.sel_pick_up[e][s][i].prop:0;var h=5;if(!d){h=0;var v=!0,g=!1,k=void 0;try{for(var b,x=o()(f);!(v=(b=x.next()).done);v=!0){var y=b.value;h+=Number(this.sel_pick_up[e][s][y].prop.substr(0,5))}}catch(e){g=!0,k=e}finally{try{!v&&x.return&&x.return()}finally{if(g)throw k}}}var w=!0,C=!1,N=void 0;try{for(var S,P=o()(f);!(w=(S=P.next()).done);w=!0){var V=S.value;if(V!==i){var j=Number(this.sel_pick_up[e][s][V].prop.substr(0,5))/h,O=Number(5-_)*j;this.sel_pick_up[e][s][V].prop=Number(O).toFixed(3)}}}catch(e){C=!0,N=e}finally{try{!w&&P.return&&P.return()}finally{if(C)throw N}}d&&(this.sel_pick_up[e][s][i].prop=_,this.character[e][t][s][i].prop=_+"%")}},toggleFreeSt:function(e,t,s,i){this.sel_pick_up[e][s][i].free_stone=!this.sel_pick_up[e][s][i].free_stone,this.character[e][t][s][i].free_stone=!this.character[e][t][s][i].free_stone},getDateNow:function(){var e=new Date;return 1e8*e.getFullYear()+1e6*(e.getMonth()+1)+(1e4*e.getDate()+100*e.getHours()+e.getMinutes())},showInput:function(e){var t=this;this["inputVisible_"+e]=!0,this.$nextTick(function(s){t.$refs["saveTagInput_"+e].$refs.input.focus()})},inputConfirm:function(e,t){var s=this["inputValue_"+t];""!==s&&this.profiles.settings.reply_info[e].reply.push(s),this["inputVisible_"+t]=!1,this["inputValue_"+t]=""},closeReplaysTag:function(e,t){this.profiles.settings.reply_info[e].reply.splice(t,1)},update:function(){var e,t=this,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.getDateNow();if(this.profiles.pools.info.version=i,s)"others"===this.activePool?(e=this.profiles.settings,Object(p.d)({url:"/setting/pcr-setting.save",method:"post",data:e})).then(function(e){0===e.code?t.$message.success("保存成功"):t.$message.error(e.msg)}):(this.handlePools(this.activePool,i),function(e){return Object(p.d)({url:"/setting/pcr-pools.save",method:"post",data:e})}(this.profiles.pools).then(function(e){0===e.code?t.$message.success("保存成功"):t.$message.error(e.msg)}));else{for(var o in this.poolName)"others"!==o&&this.handlePools(o,i);(function(e){return Object(p.d)({url:"/setting/pcr-all.save",method:"post",data:e})})({settings:this.profiles.settings,pools:this.profiles.pools}).then(function(e){0===e.code?t.$message.success("保存成功"):t.$message.error(e.msg)})}},handlePools:function(e,t){var s={star1:{pool:[],prop:795,prop_last:0,name:"1星",prefix:"★"},star2:{pool:[],prop:180,prop_last:975,name:"2星",prefix:"★★"},star3:{pool:[],prop:25,prop_last:25,name:"3星",prefix:"★★★"}};for(var i in s){var n=!0,a=!1,l=void 0;try{for(var p,c=o()(this.sel_normal[e][i]);!(n=(p=c.next()).done);n=!0){var u=p.value;s[i].pool.push(u)}}catch(e){a=!0,l=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw l}}}if(r()(this.sel_pick_up[e].star3).length>0){for(var m in s.pick_up={pool:[],prop:7,prop_last:7,name:"Pick Up",prefix:"★★★",free_stone:[]},this.sel_pick_up[e].star3)this.sel_pick_up[e].star3.hasOwnProperty(m)&&(s.pick_up.pool.push(m),this.sel_pick_up[e].star3[m].free_stone&&s.pick_up.free_stone.push(m));s.star3.prop-=7,s.star3.prop_last-=7}if(r()(this.sel_pick_up[e].star2).length>0){var _={};for(var d in this.sel_pick_up[e].star2)this.sel_pick_up[e].star2.hasOwnProperty(d)&&(_[10*this.sel_pick_up[e].star2[d].prop]||(_[10*this.sel_pick_up[e].star2[d].prop]=[]),_[10*this.sel_pick_up[e].star2[d].prop].push(d));var f=1;for(var h in _)s["pick_up"+f]={pool:_[h],prop:Number(h),prop_last:5.4*h,name:"Pick Up",prefix:"★★",free_stone:[]},f++;s.star2.prop-=50,s.star2.prop_last-=270}this.profiles.pools[e].pools=s,this.profiles.pools[e].info.version=t}},created:function(){var e=this;this.$route.meta.auth&&this.checkAuth().then(function(){e.checkAdmin().then(e.isAdmin=!0),e.getSettings()}).catch(function(t){return e.$router.push(t)})}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{attrs:{shadow:"hover","body-style":e.bodyStyle}},[s("div",{staticStyle:{position:"relative"},attrs:{slot:"header"},slot:"header"},[s("el-page-header",{attrs:{content:"PCR卡池设置"},on:{back:function(t){return e.$router.push("/index")}}}),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{position:"absolute",top:"0",right:"0"}},[e.checkTop?s("span",[s("el-checkbox",{attrs:{label:e.hidden_unsel?"隐藏已选择":"显示已选择"},model:{value:e.hidden_unsel,callback:function(t){e.hidden_unsel=t},expression:"hidden_unsel"}}),e._v(" "),s("el-checkbox",{attrs:{label:e.prop_on?"显示概率":"隐藏概率"},model:{value:e.prop_on,callback:function(t){e.prop_on=t},expression:"prop_on"}}),e._v(" "),s("el-checkbox",{attrs:{label:e.nickName_on?"显示角色名":"隐藏角色名"},model:{value:e.nickName_on,callback:function(t){e.nickName_on=t},expression:"nickName_on"}}),e._v(" "),s("el-checkbox",{attrs:{label:e.lang_cn?"中文昵称":"日文昵称"},model:{value:e.lang_cn,callback:function(t){e.lang_cn=t},expression:"lang_cn"}})],1):s("span",{staticClass:"el-icon-d-arrow-right arrow-down",staticStyle:{transform:"rotate(90deg) scaleY(2)","margin-right":"10px"},on:{click:function(t){e.drawer=!0}}}),e._v(" "),s("span",{staticStyle:{"margin-left":"20px"}},[e.isAdmin?s("el-tooltip",{attrs:{content:"添加角色",placement:"bottom"}},[s("el-button",{staticClass:"el-icon-plus",attrs:{type:"success",size:"mini",circle:""},on:{click:function(t){e.charAddVisible=!0}}})],1):e._e(),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!1)}}},[e._v("保存全部")])],1)])],1),e._v(" "),e.character?s("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stretch:!0},model:{value:e.activePool,callback:function(t){e.activePool=t},expression:"activePool"}},[e._l(e.character,function(t,i,o){return s("el-tab-pane",{key:o,staticClass:"tab-panel-box",attrs:{label:e.poolName[i],name:i}},[s("el-row",{staticStyle:{"margin-bottom":"20px","text-align":"left"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!0)}}},[e._v("保存当页")])],1),e._v(" "),s("el-collapse",{model:{value:e.activeStars[i],callback:function(t){e.$set(e.activeStars,i,t)},expression:"activeStars[n]"}},e._l(e.poolTitle,function(t,o,n){return s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"hidden"!==o,expression:"n1!=='hidden'"}],key:n,attrs:{title:t,name:o}},["star3"===o||"star1"===o?s("el-divider",{attrs:{"content-position":"left"}},[e._v("常驻")]):e._e(),e._v(" "),e._l(e.character[i].normal[o],function(t,n,r){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],staticClass:"char-box",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("img",{style:e.imgWidth,attrs:{src:e.getSrc(t,o),alt:""},on:{click:function(t){return e.toggleSel(i,"normal",o,n)}}}),e._v(" "),"star1"!==o?s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle,on:{click:function(t){return e.togglePickCheck(i,"normal",o,n)}}},[e._v("Up")]):e._e(),e._v(" "),"star3"===o?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t.free_stone?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle,on:{click:function(t){return e.toggleFreeSt(i,"normal",o,n)}}},[e._v("+100")]):e._e()]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:e.imgWidth,domProps:{textContent:e._s(t.name[e.lang])}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:e.imgWidth,domProps:{textContent:e._s(e.prop_computed(t.sel,t.pick_up,i,o,t.prop,t.id))}})])}),e._v(" "),"star3"===o||"star1"===o?s("el-divider",{attrs:{"content-position":"left"}},[e._v("限定")]):e._e(),e._v(" "),e._l(e.character[i].limited[o],function(t,n,r){return"star3"===o||"star1"===o?s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],staticClass:"char-box",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("img",{style:e.imgWidth,attrs:{src:e.getSrc(t,o),alt:""},on:{click:function(t){return e.toggleSel(i,"limited",o,n)}}}),e._v(" "),"star1"!==o?s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle,on:{click:function(t){return e.togglePickCheck(i,"limited",o,n)}}},[e._v("Up")]):e._e(),e._v(" "),"star3"===o?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t.free_stone?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle,on:{click:function(t){return e.toggleFreeSt(i,"limited",o,n)}}},[e._v("+100")]):e._e()]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:e.imgWidth,domProps:{textContent:e._s(t.name[e.lang])}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:e.imgWidth,domProps:{textContent:e._s(e.prop_computed(t.sel,t.pick_up,i,o,t.prop,t.id))}})]):e._e()}),e._v(" "),e._l(e.character[i].hidden.star1,function(t,i,n){return"hidden"===o?s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],staticClass:"char-box",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("img",{staticStyle:{cursor:"not-allowed"},style:e.imgWidth,attrs:{src:e.getSrc(t,o),alt:""}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle},[e._v("Up")]),e._v(" "),"star3"===o?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t.free_stone?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle},[e._v("+100")]):e._e()]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:e.imgWidth,domProps:{textContent:e._s(t.name[e.lang])}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:e.imgWidth,domProps:{textContent:e._s(t.prop)}})]):e._e()})],2)}),1)],1)}),e._v(" "),s("el-tab-pane",{attrs:{name:"others"}},[s("span",{attrs:{slot:"label"},slot:"label"},[""!==e.poolName.others?s("span",{domProps:{textContent:e._s(e.poolName.others)}}):s("i",{staticClass:"el-icon-setting"})]),e._v(" "),s("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"left",padding:"5px 5px"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!0)}}},[e._v("保存当页")])],1),e._v(" "),s("el-form",{staticStyle:{padding:"0 15px"},attrs:{"label-width":"140px","label-position":"left"}},[s("el-form-item",{attrs:{label:"自动更新"}},[s("el-checkbox",{attrs:{label:e.profiles.settings.auto_update?"启用":"禁用"},model:{value:e.profiles.settings.auto_update,callback:function(t){e.$set(e.profiles.settings,"auto_update",t)},expression:"profiles.settings['auto_update']"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"默认卡池"}},[s("el-select",{model:{value:e.profiles.settings.default_pool,callback:function(t){e.$set(e.profiles.settings,"default_pool",t)},expression:"profiles.settings['default_pool']"}},[s("el-option",{attrs:{label:"日服",value:"jp"}}),e._v(" "),s("el-option",{attrs:{label:"台服",value:"tw"}}),e._v(" "),s("el-option",{attrs:{label:"国服",value:"cn"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"抽卡上限"}},[s("el-input-number",{attrs:{min:30,max:600},model:{value:e.profiles.settings.day_limit,callback:function(t){e.$set(e.profiles.settings,"day_limit",t)},expression:"profiles.settings['day_limit']"}})],1),e._v(" "),s("el-divider",{attrs:{"content-position":"left"}},[e._v("下井欧气反馈")]),e._v(" "),s("el-form-item",{attrs:{label:"两个或以上UP角色"}},[e._l(e.profiles.settings.reply_info.r.reply,function(t,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeReplaysTag("r",i)}}},[s("span",{domProps:{textContent:e._s(t)}})])}),e._v(" "),e.inputVisible_1?s("el-input",{ref:"saveTagInput_1",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.inputConfirm("r",1)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputConfirm("r",1)}},model:{value:e.inputValue_1,callback:function(t){e.inputValue_1=t},expression:"inputValue_1"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(1)}}},[e._v("+ New Reply")])],2),e._v(" "),s("el-form-item",{attrs:{label:"0个UP角色"}},[e._l(e.profiles.settings.reply_info.r0.reply,function(t,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeReplaysTag("r0",i)}}},[s("span",{domProps:{textContent:e._s(t)}})])}),e._v(" "),e.inputVisible_2?s("el-input",{ref:"saveTagInput_2",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.inputConfirm("r0",2)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputConfirm("r0",2)}},model:{value:e.inputValue_2,callback:function(t){e.inputValue_2=t},expression:"inputValue_2"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(2)}}},[e._v("+ New Reply")])],2),e._v(" "),s("el-form-item",{attrs:{label:"1到3个SSR"}},[e._l(e.profiles.settings.reply_info.r1.reply,function(t,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeReplaysTag("r1",i)}}},[s("span",{domProps:{textContent:e._s(t)}})])}),e._v(" "),e.inputVisible_3?s("el-input",{ref:"saveTagInput_3",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.inputConfirm("r1",3)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputConfirm("r1",3)}},model:{value:e.inputValue_3,callback:function(t){e.inputValue_3=t},expression:"inputValue_3"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(3)}}},[e._v("+ New Reply")])],2),e._v(" "),s("el-form-item",{attrs:{label:"4到9个SSR"}},[e._l(e.profiles.settings.reply_info.r2.reply,function(t,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeReplaysTag("r2",i)}}},[s("span",{domProps:{textContent:e._s(t)}})])}),e._v(" "),e.inputVisible_4?s("el-input",{ref:"saveTagInput_4",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.inputConfirm("r2",4)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputConfirm("r2",4)}},model:{value:e.inputValue_4,callback:function(t){e.inputValue_4=t},expression:"inputValue_4"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(4)}}},[e._v("+ New Reply")])],2),e._v(" "),s("el-form-item",{attrs:{label:"10个以上SSR"}},[e._l(e.profiles.settings.reply_info.r3.reply,function(t,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeReplaysTag("r3",i)}}},[s("span",{domProps:{textContent:e._s(t)}})])}),e._v(" "),e.inputVisible_5?s("el-input",{ref:"saveTagInput_5",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.inputConfirm("r3",5)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputConfirm("r3",5)}},model:{value:e.inputValue_5,callback:function(t){e.inputValue_5=t},expression:"inputValue_5"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(5)}}},[e._v("+ New Reply")])],2)],1)],1)],2):e._e(),e._v(" "),s("el-drawer",{attrs:{"with-header":!1,visible:e.drawer,direction:"ttb",size:"110px","modal-append-to-body":!1},on:{"update:visible":function(t){e.drawer=t}}},[s("div",{staticStyle:{padding:"20px"}},[s("div",{staticClass:"check-box-div"},[s("el-switch",{attrs:{"active-text":e.hidden_unsel?"隐藏已选择":"显示已选择"},model:{value:e.hidden_unsel,callback:function(t){e.hidden_unsel=t},expression:"hidden_unsel"}}),e._v(" "),s("el-switch",{attrs:{"active-text":e.prop_on?"显示概率":"隐藏概率"},model:{value:e.prop_on,callback:function(t){e.prop_on=t},expression:"prop_on"}})],1),e._v(" "),s("div",{staticClass:"check-box-div"},[s("el-switch",{attrs:{"active-text":e.nickName_on?"显示角色名":"隐藏角色名"},model:{value:e.nickName_on,callback:function(t){e.nickName_on=t},expression:"nickName_on"}}),e._v(" "),s("el-switch",{attrs:{"active-text":e.lang_cn?"中文昵称":"日文昵称"},model:{value:e.lang_cn,callback:function(t){e.lang_cn=t},expression:"lang_cn"}})],1)])]),e._v(" "),s("char-add",{attrs:{visible:e.charAddVisible},on:{"update:visible":function(t){e.charAddVisible=t}}})],1)},staticRenderFns:[]};var d=s("VU/8")(m,_,!1,function(e){s("+Ajd")},"data-v-c1f4ccac",null);t.default=d.exports},fZjL:function(e,t,s){e.exports={default:s("jFbC"),__esModule:!0}},fxRn:function(e,t,s){s("+tPU"),s("zQR9"),e.exports=s("g8Ux")},g8Ux:function(e,t,s){var i=s("77Pl"),o=s("3fs2");e.exports=s("FeBl").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},jFbC:function(e,t,s){s("Cdx3"),e.exports=s("FeBl").Object.keys},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var i=s("FeBl"),o=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},uqUo:function(e,t,s){var i=s("kM2E"),o=s("FeBl"),n=s("S82l");e.exports=function(e,t){var s=(o.Object||{})[e]||Object[e],r={};r[e]=t(s),i(i.S+i.F*n(function(){s(1)}),"Object",r)}}});
//# sourceMappingURL=0.1b72703196401be84587.js.map