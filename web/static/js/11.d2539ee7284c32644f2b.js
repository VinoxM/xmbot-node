webpackJsonp([11],{Z2No:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("gyMJ"),a={name:"chat-setting",data:function(){var t=this;return{loading:!1,setting:{},saveLoading:!1,form:{apiName:"",question:"",answer:""},rules:{apiName:[{required:!0,message:"请选择API",trigger:"change"}],question:[{required:!0,message:"请输入问题",trigger:"blur"},{validator:function(e,s,n){t.setting["Q&A"].some(function(t){return t.question===s})?n(new Error("与已有问题重复")):n()},trigger:"blur"}],answer:[{required:!0,message:"请输入回答",trigger:"blur"}]}}},computed:{botApi:function(){return this.$botApi},isAdmin:function(){return this.$store.state.isAdmin}},methods:{delOne:function(t){this.setting["Q&A"].splice(t,1)},addOne:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.setting["Q&A"].push(t.form),t.form={question:"",answer:""})})},save:function(){var t,e=this;this.saveLoading=!0,(t=this.setting,Object(n.d)({url:"/setting/chat.save",method:"post",data:t})).then(function(t){e.$message({message:t.msg,type:0===t.code?"success":"error"}),e.saveLoading=!1}).catch(function(t){e.saveLoading=!1})}},created:function(){var t=this;this.loading=!0,Object(n.d)({url:"/setting/chat.json",method:"get"}).then(function(e){t.loading=!1,0===e.code?t.setting=e.data:t.$message.error(e.msg)}).catch(function(){t.loading=!1})}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"padding-top":"5px"}},[t.isAdmin?s("el-row",{staticStyle:{"margin-bottom":"15px"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存本页")])],1):t._e(),t._v(" "),s("xm-info-box",{staticStyle:{"padding-top":"20px"},attrs:{title:"Q&A",retractable:""}},[t._l(t.setting["Q&A"],function(e,n){return t.setting["Q&A"]?s("el-row",{key:n,staticClass:"qa-box"},[s("el-col",{staticStyle:{height:"40px"},attrs:{span:2}},[s("el-tag",{staticStyle:{width:"100%","vertical-align":"middle",height:"40px","line-height":"40px","text-align":"center","font-size":"14px"}},[t._v(t._s(e.apiName))])],1),t._v(" "),s("el-col",{attrs:{span:7}},[s("el-input",{attrs:{readonly:!t.isAdmin},model:{value:e.question,callback:function(s){t.$set(e,"question",s)},expression:"item.question"}})],1),t._v(" "),s("el-col",{staticClass:"text-center",staticStyle:{"line-height":"40px"},attrs:{span:1}},[s("span",{staticStyle:{"line-height":"40px"}},[t._v("：")])]),t._v(" "),s("el-col",{attrs:{span:t.isAdmin?12:14}},[s("el-input",{attrs:{readonly:!t.isAdmin},model:{value:e.answer,callback:function(s){t.$set(e,"answer",s)},expression:"item['answer']"}})],1),t._v(" "),t.isAdmin?s("span",{staticClass:"text-right qa-btn"},[s("el-col",{staticClass:"text-right qa-btn",attrs:{span:2}},[s("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(e){return t.delOne(n)}}},[t._v("删除")])],1)],1):t._e()],1):t._e()}),t._v(" "),t.isAdmin?s("el-row",[s("el-form",{ref:"form",staticClass:"add-form",attrs:{model:t.form,rules:t.rules}},[s("el-col",{attrs:{span:2}},[s("el-form-item",{attrs:{prop:"apiName"}},[s("el-select",{model:{value:t.form.apiName,callback:function(e){t.$set(t.form,"apiName",e)},expression:"form.apiName"}},t._l(t.botApi,function(t,e){return s("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1)],1),t._v(" "),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{prop:"question"}},[s("el-input",{model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1)],1),t._v(" "),s("el-col",{staticClass:"text-center",staticStyle:{"line-height":"40px"},attrs:{span:1}},[s("span",[t._v("：")])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{prop:"answer"}},[s("el-input",{model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form['answer']"}})],1)],1),t._v(" "),s("el-col",{staticClass:"text-right qa-btn",attrs:{span:2}},[s("el-button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:t.addOne}},[t._v("\n            添加\n          ")])],1)],1)],1):t._e()],2)],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(t){s("wThX")},"data-v-5b63183d",null);e.default=r.exports},wThX:function(t,e){}});
//# sourceMappingURL=11.d2539ee7284c32644f2b.js.map