(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-305d7d96"],{1148:function(e,t,s){"use strict";var i=s("a691"),r=s("1d80");e.exports="".repeat||function(e){var t=String(r(this)),s="",o=i(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(s+=t);return s}},"408a":function(e,t,s){var i=s("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var i=s("1d80"),r=s("5899"),o="["+r+"]",n=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),l=function(e){return function(t){var s=String(i(t));return 1&e&&(s=s.replace(n,"")),2&e&&(s=s.replace(a,"")),s}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5a52":function(e,t,s){},7156:function(e,t,s){var i=s("861d"),r=s("d2bb");e.exports=function(e,t,s){var o,n;return r&&"function"==typeof(o=t.constructor)&&o!==s&&i(n=o.prototype)&&n!==s.prototype&&r(e,n),e}},"9ef2":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"i",(function(){return l})),s.d(t,"f",(function(){return p})),s.d(t,"h",(function(){return c})),s.d(t,"g",(function(){return u})),s.d(t,"a",(function(){return h}));var i=s("365c"),r=function(){return Object(i["d"])({url:"/setting/gacha/pcr.json",method:"get"})},o=function(){return Object(i["d"])({url:"/setting/gacha/pcr/pools.json",method:"get"})},n=function(){return Object(i["d"])({url:"/setting/gacha/pcr/character.json",method:"get"})},a=function(){return Object(i["d"])({url:"/setting/gacha/pcr/nickNames.json",method:"get"})},l=function(e){return Object(i["d"])({url:"/setting/gacha/pcr-setting.save",method:"post",data:e})},p=function(e){return Object(i["d"])({url:"/setting/gacha/pcr-all.save",method:"post",data:e})},c=function(e){return Object(i["d"])({url:"/setting/gacha/pcr-pools.save",method:"post",data:e})},u=function(e){return Object(i["d"])({url:"/setting/gacha/pcr-nickNames.save",method:"post",data:e,processData:!1,contentType:!1})},h=function(e){return Object(i["d"])({url:"/setting/gacha/pcr/delCharacter.do",method:"post",data:e})}},a434:function(e,t,s){"use strict";var i=s("23e7"),r=s("23cb"),o=s("a691"),n=s("50c4"),a=s("7b0b"),l=s("65f0"),p=s("8418"),c=s("1dde"),u=c("splice"),h=Math.max,d=Math.min,f=9007199254740991,_="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var s,i,c,u,m,g,v=a(this),b=n(v.length),k=r(e,b),x=arguments.length;if(0===x?s=i=0:1===x?(s=0,i=b-k):(s=x-2,i=d(h(o(t),0),b-k)),b+s-i>f)throw TypeError(_);for(c=l(v,i),u=0;u<i;u++)m=k+u,m in v&&p(c,u,v[m]);if(c.length=i,s<i){for(u=k;u<b-i;u++)m=u+i,g=u+s,m in v?v[g]=v[m]:delete v[g];for(u=b;u>b-i+s;u--)delete v[u-1]}else if(s>i)for(u=b-i;u>k;u--)m=u+i-1,g=u+s-1,m in v?v[g]=v[m]:delete v[g];for(u=0;u<s;u++)v[u+k]=arguments[u+2];return v.length=b-i+s,c}})},a555:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-left"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"right"}},[e.checkTop?s("span",[s("el-checkbox",{attrs:{label:e.hidden_unsel?"隐藏已选择":"显示已选择"},model:{value:e.hidden_unsel,callback:function(t){e.hidden_unsel=t},expression:"hidden_unsel"}}),s("el-checkbox",{attrs:{label:e.prop_on?"显示概率":"隐藏概率"},model:{value:e.prop_on,callback:function(t){e.prop_on=t},expression:"prop_on"}}),s("el-checkbox",{attrs:{label:e.nickName_on?"显示角色名":"隐藏角色名"},model:{value:e.nickName_on,callback:function(t){e.nickName_on=t},expression:"nickName_on"}}),s("el-checkbox",{attrs:{label:e.lang_cn?"中文昵称":"日文昵称"},model:{value:e.lang_cn,callback:function(t){e.lang_cn=t},expression:"lang_cn"}})],1):s("span",{staticClass:"el-icon-d-arrow-right arrow-down",staticStyle:{transform:"rotate(90deg) scaleY(2)","margin-right":"10px"},on:{click:function(t){e.drawer=!0}}}),s("span",{staticStyle:{"margin-left":"20px"}},[e.fullWidth>900?s("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getSettings}},[e._v("刷新角色")]):e._e(),e.isAdmin?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!1)}}},[e._v("保存全部")]):e._e()],1)]),e.character?s("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stretch:!0},model:{value:e.activePool,callback:function(t){e.activePool=t},expression:"activePool"}},[e._l(e.character,(function(t,i,r){return s("el-tab-pane",{key:r,staticClass:"tab-panel-box",attrs:{label:e.poolName[i],name:i}},[s("el-row",{staticStyle:{"margin-bottom":"20px","text-align":"left"}},[e.isAdmin?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!0)}}},[e._v("保存本页")]):e._e()],1),s("el-collapse",{model:{value:e.activeStars[i],callback:function(t){e.$set(e.activeStars,i,t)},expression:"activeStars[n]"}},e._l(e.poolTitle,(function(t,r,o){return s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:"hidden"!==r,expression:"n1!=='hidden'"}],key:o,attrs:{title:t,name:r}},["star3"===r||"star1"===r?s("el-divider",{attrs:{"content-position":"left"}},[e._v("常驻")]):e._e(),e._l(e.character[i].normal[r],(function(t,o,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],class:e.isAdmin?"char-box":"char-box not-admin",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("el-image",{class:e.isAdmin?"cur-pointer":"cur-default",style:e.imgWidth,attrs:{src:e.getSrc(t,r),fit:"fill"},on:{click:function(t){return e.toggleSel(i,"normal",r,o)}}},[s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"placeholder"},slot:"placeholder"},[s("el-icon",{staticClass:"el-icon-loading"}),s("span",[e._v("加载中")])],1),s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"}),s("span",[e._v("加载失败")])])]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle,on:{click:function(t){return e.togglePickCheck(i,"normal",r,o)}}},[e._v("Up")]),"star3"===r?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t["free_stone"]?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle,on:{click:function(t){return e.toggleFreeSt(i,"normal",r,o)}}},[e._v("+100")]):e._e()],1),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(t.name[e.lang])}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(e.prop_computed(t.sel,t.pick_up,i,r,t.prop,t.id))}})])})),"star3"===r||"star1"===r?s("el-divider",{attrs:{"content-position":"left"}},[e._v("限定")]):e._e(),e._l(e.character[i]["limited"][r],(function(t,o,n){return"star3"===r||"star1"===r?s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],class:e.isAdmin?"char-box":"char-box not-admin",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("el-image",{class:e.isAdmin?"cur-pointer":"cur-default",style:e.imgWidth,attrs:{src:e.getSrc(t,r),fit:"fill"},on:{click:function(t){return e.toggleSel(i,"limited",r,o)}}},[s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"placeholder"},slot:"placeholder"},[s("el-icon",{staticClass:"el-icon-loading"}),s("span",[e._v("加载中")])],1),s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"}),s("span",[e._v("加载失败")])])]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle,on:{click:function(t){return e.togglePickCheck(i,"limited",r,o)}}},[e._v("Up")]),"star3"===r?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t["free_stone"]?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle,on:{click:function(t){return e.toggleFreeSt(i,"limited",r,o)}}},[e._v("+100")]):e._e()],1),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(t.name[e.lang])}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(e.prop_computed(t.sel,t.pick_up,i,r,t.prop,t.id))}})]):e._e()})),e._l(e.character[i].hidden.star1,(function(t,i,o){return"hidden"===r?s("div",{directives:[{name:"show",rawName:"v-show",value:t.sel||!t.sel&&!e.hidden_unsel,expression:"v2.sel||(!v2.sel&&!hidden_unsel)"}],staticClass:"char-box not-admin",attrs:{title:t.name[e.lang]}},[s("div",{class:t.sel?"img-box":"img-box gray"},[s("el-image",{staticStyle:{cursor:"not-allowed"},style:e.imgWidth,attrs:{src:e.getSrc(t,r),fit:"fill"}},[s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"placeholder"},slot:"placeholder"},[s("el-icon",{staticClass:"el-icon-loading"}),s("span",[e._v("加载中")])],1),s("div",{staticClass:"image-slot",style:e.imgWidth,attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"}),s("span",[e._v("加载失败")])])]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.sel,expression:"v2.sel"}],class:t.pick_up?"pick-up pick-up-on":"pick-up pick-up-off",style:e.spanStyle},[e._v("Up")]),"star3"===r?s("span",{directives:[{name:"show",rawName:"v-show",value:t.pick_up,expression:"v2.pick_up"}],class:t["free_stone"]?"free-stone free-stone-on":"free-stone free-stone-off",style:e.spanStyle},[e._v("+100")]):e._e()],1),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nickName_on,expression:"nickName_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(t.name[e.lang])}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.prop_on,expression:"prop_on"}],style:{width:e.imgWidth.width},domProps:{textContent:e._s(t.prop)}})]):e._e()}))],2)})),1)],1)})),s("el-tab-pane",{attrs:{name:"others"}},[s("span",{attrs:{slot:"label"},slot:"label"},[""!==e.poolName["others"]?s("span",{domProps:{textContent:e._s(e.poolName["others"])}}):s("i",{staticClass:"el-icon-setting"})]),s("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"left",padding:"5px 5px"}},[e.isAdmin?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.update(!0)}}},[e._v("保存本页")]):e._e(),e.fullWidth<900?s("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getSettings}},[e._v("刷新角色")]):e._e()],1),s("el-form",{staticStyle:{padding:"0 15px"},attrs:{"label-width":"140px","label-position":"left"}},[s("el-form-item",{attrs:{label:"默认卡池"}},[s("el-select",{attrs:{disabled:!e.isAdmin},model:{value:e.profiles.settings["default_pool"],callback:function(t){e.$set(e.profiles.settings,"default_pool",t)},expression:"profiles.settings['default_pool']"}},[s("el-option",{attrs:{label:"日服",value:"jp"}}),s("el-option",{attrs:{label:"台服",value:"tw"}}),s("el-option",{attrs:{label:"国服",value:"cn"}})],1)],1),s("el-form-item",{attrs:{label:"抽卡上限"}},[s("el-input-number",{attrs:{min:30,max:12e3,disabled:!e.isAdmin},model:{value:e.profiles.settings["day_limit"],callback:function(t){e.$set(e.profiles.settings,"day_limit",t)},expression:"profiles.settings['day_limit']"}})],1),s("el-divider",{attrs:{"content-position":"left"}},[e._v("下井欧气反馈")]),s("el-form-item",{attrs:{label:"两个或以上UP角色"}},[s("xm-tags",{attrs:{value:e.profiles.settings["reply_info"]["r"]["reply"],label:"Reply",disabled:!e.isAdmin},on:{"update:value":function(t){return e.$set(e.profiles.settings["reply_info"]["r"],"reply",t)}}})],1),s("el-form-item",{attrs:{label:"0个UP角色"}},[s("xm-tags",{attrs:{value:e.profiles.settings["reply_info"]["r0"]["reply"],label:"Reply",disabled:!e.isAdmin},on:{"update:value":function(t){return e.$set(e.profiles.settings["reply_info"]["r0"],"reply",t)}}})],1),s("el-form-item",{attrs:{label:"1到3个SSR"}},[s("xm-tags",{attrs:{value:e.profiles.settings["reply_info"]["r1"]["reply"],label:"Reply",disabled:!e.isAdmin},on:{"update:value":function(t){return e.$set(e.profiles.settings["reply_info"]["r1"],"reply",t)}}})],1),s("el-form-item",{attrs:{label:"4到9个SSR"}},[s("xm-tags",{attrs:{value:e.profiles.settings["reply_info"]["r2"]["reply"],label:"Reply",disabled:!e.isAdmin},on:{"update:value":function(t){return e.$set(e.profiles.settings["reply_info"]["r2"],"reply",t)}}})],1),s("el-form-item",{attrs:{label:"10个以上SSR"}},[s("xm-tags",{attrs:{value:e.profiles.settings["reply_info"]["r3"]["reply"],label:"Reply",disabled:!e.isAdmin},on:{"update:value":function(t){return e.$set(e.profiles.settings["reply_info"]["r3"],"reply",t)}}})],1)],1)],1)],2):e._e(),s("el-drawer",{attrs:{"with-header":!1,visible:e.drawer,direction:"ttb",size:"110px","modal-append-to-body":!1},on:{"update:visible":function(t){e.drawer=t}}},[s("div",{staticStyle:{padding:"20px"}},[s("div",{staticClass:"check-box-div"},[s("el-switch",{attrs:{"active-text":e.hidden_unsel?"隐藏已选择":"显示已选择"},model:{value:e.hidden_unsel,callback:function(t){e.hidden_unsel=t},expression:"hidden_unsel"}}),s("el-switch",{attrs:{"active-text":e.prop_on?"显示概率":"隐藏概率"},model:{value:e.prop_on,callback:function(t){e.prop_on=t},expression:"prop_on"}})],1),s("div",{staticClass:"check-box-div"},[s("el-switch",{attrs:{"active-text":e.nickName_on?"显示角色名":"隐藏角色名"},model:{value:e.nickName_on,callback:function(t){e.nickName_on=t},expression:"nickName_on"}}),s("el-switch",{attrs:{"active-text":e.lang_cn?"中文昵称":"日文昵称"},model:{value:e.lang_cn,callback:function(t){e.lang_cn=t},expression:"lang_cn"}})],1)])])],1)},r=[],o=s("b85c"),n=(s("1276"),s("ac1f"),s("b64b"),s("b680"),s("a434"),s("a9e3"),s("9ef2")),a={name:"pcr-pool-setting",data:function(){return{fullWidth:0,loading:!0,imgWidth:{width:"96px",height:"96px"},spanStyle:{fontSize:"12px",height:"18px",lineHeight:"18px"},bodyStyle:{padding:"15px 5px"},profiles:{settings:null,pools:null,character:null},nickName_on:!1,prop_on:!1,hidden_unsel:!1,character:null,sel_normal:null,sel_pick_up:null,pool_prop:null,charNames:null,activePool:"pool_jp",poolName:{pool_jp:"日服卡池",pool_tw:"台服卡池",pool_cn:"国服卡池",others:"其他设置"},activeStars:{pool_jp:["star3"],pool_tw:["star3"],pool_cn:["star3"]},poolTitle:{star3:"SSR",star2:"SR",star1:"R",hidden:"Hidden"},drawer:!1,checkTop:!1,lang_cn:!1}},computed:{suf:function(){return this.star<3?1:3},lang:function(){return this.lang_cn?1:0},isAdmin:function(){return this.$store.state.isAdmin}},mounted:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},beforeDestroy:function(){this.handleResize()},methods:{handleResize:function(){this.fullWidth=document.documentElement.clientWidth,this.fullWidth>900?(this.imgWidth.width="96px",this.imgWidth.height="96px",this.checkTop=!0,this.spanStyle={fontSize:"12px",height:"18px",lineHeight:"18px"},this.tabPosition="top",this.bodyStyle.padding="20px",this.poolName={pool_jp:"日服卡池",pool_tw:"台服卡池",pool_cn:"国服卡池",others:"其他设置"}):(this.imgWidth.width="72px",this.imgWidth.height="72px",this.checkTop=!1,this.spanStyle={fontSize:"9px",height:"16px",lineHeight:"16px"},this.tabPosition="left",this.bodyStyle.padding="15px 5px",this.poolName={pool_jp:"JP",pool_tw:"TW",pool_cn:"CN",others:""})},getSettings:function(){var e=this,t=this;t.loading=!0,n["e"]().then((function(t){return e.profiles.settings=t.data})),n["d"]().then((function(e){t.profiles.pools=e.data,n["b"]().then((function(s){t.profiles.character=s.data;var i=e.data,r=s.data,o={pool_jp:{},pool_tw:{},pool_cn:{}},n={},a={pool_jp:{star1:[],star2:[],star3:[]},pool_tw:{star1:[],star2:[],star3:[]},pool_cn:{star1:[],star2:[],star3:[]}},l={pool_jp:{star1:{},star2:{},star3:{}},pool_tw:{star1:{},star2:{},star3:{}},pool_cn:{star1:{},star2:{},star3:{}}},p={pool_jp:{star1:0,star2:0,star3:0},pool_tw:{star1:0,star2:0,star3:0},pool_cn:{star1:0,star2:0,star3:0}};for(var c in o){var u={star1:{pool:{}},star2:{pool:{}},star3:{pool:{}}};for(var h in o[c]=JSON.parse(JSON.stringify(r)),i[c]["pools"])if(i[c]["pools"].hasOwnProperty(h)&&h.length>6)for(var d=i[c]["pools"][h],f=String(d["prefix"]).split("★").length-1,_=0;_<d["pool"].length;_++)u["star"+f]["pool"][d["pool"][_]]={prop:d["prop"]/d["pool"].length,prop_last:d["prop_last"]/d["pool"].length,free_stone:-1!==d["free_stone"].indexOf(d["pool"][_])};for(var m in r)if(r.hasOwnProperty(m))for(var g in r[m])if(r[m].hasOwnProperty(g))for(var v in r[m][g])if(r[m][g].hasOwnProperty(v)){p[c][g]=i[c]["pools"][g]["prop"];var b=!1,k=0,x=0,y=!1,w=!1;if(-1!==i[c]["pools"][g]["pool"].indexOf(v)){b=!0,a[c][g].push(v);var N=i[c]["pools"][g]["prop"]/i[c]["pools"][g]["pool"].length;k=N/10;var S=i[c]["pools"][g]["prop_last"]/i[c]["pools"][g]["pool"].length;x=S/10}else if(u[g]["pool"]&&-1!==Object.keys(u[g]["pool"]).indexOf(v)){b=!0;var P=u[g]["pool"][v]["prop"];k=P/10;var O=u[g]["pool"][v]["prop_last"];x=O/10,y=!0,w=u[g]["pool"][v]["free_stone"],l[c][g][v]={prop:k.toFixed(3),free_stone:w}}k=k.toFixed(3)+"%",x=x.toFixed(3)+"%",o[c][m][g][v]={id:v,name:r[m][g][v],sel:b,prop:k,prop_last:x,pick_up:y,free_stone:w},n[v]||(n[v]=r[m][g][v])}}t.character=o,t.sel_normal=a,t.sel_pick_up=l,t.pool_prop=p,t.charNames=n,t.loading=!1}))}))},prop_computed:function(e,t,s,i,r,o){return e?t?this.sel_pick_up[s][i][o]["prop"]+"%":(this.pool_prop[s][i]/this.sel_normal[s][i].length/10).toFixed(3)+"%":"0.000%"},getSrc:function(e,t){var s=this.$cookies.get("curUrlPrefix"),i=s?this.$urlConf[s+"_url"]:this.$urlConf["base_url"];return i+"xmbot/resource/icon/unit/"+e.id+("star3"===t?"3":"1")+"1.jpg"},toggleSel:function(e,t,s,i){if(this.isAdmin)if(this.character[e][t][s][i]["sel"]=!this.character[e][t][s][i]["sel"],this.character[e][t][s][i]["sel"])this.sel_normal[e][s].push(i);else if(this.character[e][t][s][i]["pick_up"])this.character[e][t][s][i]["pick_up"]=!1,delete this.sel_pick_up[e][s][i],this.handlePickProp(e,t,s,i);else{var r=this.sel_normal[e][s].indexOf(i);this.sel_normal[e][s].splice(r,1)}},togglePickCheck:function(e,t,s,i){var r=this;if(this.isAdmin){var o=0,n=!1;if("star2"!==s||this.character[e][t][s][i]["pick_up"])"star1"!==s||this.character[e][t][s][i]["pick_up"]||(n=!0,this.$prompt("请输入概率:","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:o.toFixed(3),inputValidator:function(e){return!!(/[0-9]*[.][0-9]{3}/.test(e)&&Number(e)-12<0&&Number(e)>0)||"请输入大于0,小于12的三位小数"}}).then((function(n){var a=n.value;o=a,r.togglePick(e,t,s,i,o)})).catch((function(){})));else{var a=Object.keys(this.sel_pick_up[e][s]);a.length>=1&&(n=!0,o=5/(a.length+1),this.$prompt("请输入概率:","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:o.toFixed(3),inputValidator:function(e){return!!(/[0-9]*[.][0-9]{3}/.test(e)&&Number(e)-5<0&&Number(e)>0)||"请输入大于0,小于5的三位小数"}}).then((function(n){var a=n.value;o=a,r.togglePick(e,t,s,i,o)})).catch((function(){})))}n||this.togglePick(e,t,s,i,o)}},togglePick:function(e,t,s,i,r){if(this.character[e][t][s][i]["pick_up"]=!this.character[e][t][s][i]["pick_up"],this.character[e][t][s][i]["pick_up"]){var o=this.sel_normal[e][s].indexOf(i);this.sel_normal[e][s].splice(o,1),this.sel_pick_up[e][s][i]=0===r?{prop:0,free_stone:!1}:{prop:r,free_stone:!1},this.character[e][t][s][i]["prop"]=Number(this.sel_pick_up[e][s][i]["prop"]).toFixed(3)+"%"}else this.sel_normal[e][s].push(i),this.character[e][t][s][i]["prop"]=Number(this.sel_pick_up[e][s][i]["prop"]).toFixed(3)+"%",this.character[e][t][s][i]["free_stone"]=!1,delete this.sel_pick_up[e][s][i];this.handlePickProp(e,t,s,i)},handlePickProp:function(e,t,s,i){var r=Object.keys(this.sel_pick_up[e][s]).length,n={normal:{star1:795,star2:180,star3:25},up:{star1:695,star2:130,star3:18}};if(this.pool_prop[e][s]=n[r>0?"up":"normal"][s],"star3"===s){for(var a=(7/Object.keys(this.sel_pick_up[e][s]).length/10).toFixed(3),l=0,p=Object.keys(this.sel_pick_up[e][s]);l<p.length;l++){var c=p[l];this.sel_pick_up[e][s][c]["prop"]=a}this.character[e][t][s][i]["prop"]=a+"%"}else if("star2"===s){var u=0,h=this.character[e][t][s][i]["pick_up"],d=Object.keys(this.sel_pick_up[e][s]);u=h?1===d.length?"5.000":this.sel_pick_up[e][s][i]["prop"]:0;var f=5;if(!h){f=0;var _,m=Object(o["a"])(d);try{for(m.s();!(_=m.n()).done;){var g=_.value;f+=Number(this.sel_pick_up[e][s][g]["prop"].substr(0,5))}}catch(T){m.e(T)}finally{m.f()}}for(var v=0,b=d;v<b.length;v++){var k=b[v];if(k!==i){var x=Number(this.sel_pick_up[e][s][k]["prop"].substr(0,5)),y=x/f,w=Number(5-u)*y;this.sel_pick_up[e][s][k]["prop"]=Number(w).toFixed(3)}}h&&(this.sel_pick_up[e][s][i]["prop"]=u,this.character[e][t][s][i]["prop"]=u+"%")}else if("star1"===s){var N=0,S=this.character[e][t][s][i]["pick_up"],P=Object.keys(this.sel_pick_up[e][s]);N=S?1===P.length?"10.000":this.sel_pick_up[e][s][i]["prop"]:0;var O=10;if(!S){O=0;var j,C=Object(o["a"])(P);try{for(C.s();!(j=C.n()).done;){var A=j.value;O+=Number(this.sel_pick_up[e][s][A]["prop"].substr(0,5))}}catch(T){C.e(T)}finally{C.f()}}for(var W=0,F=P;W<F.length;W++){var $=F[W];if($!==i){var I=Number(this.sel_pick_up[e][s][$]["prop"].substr(0,5)),E=I/O,R=Number(10-N)*E;this.sel_pick_up[e][s][$]["prop"]=Number(R).toFixed(3)}}S&&(this.sel_pick_up[e][s][i]["prop"]=N,this.character[e][t][s][i]["prop"]=N+"%")}},toggleFreeSt:function(e,t,s,i){this.isAdmin&&(this.sel_pick_up[e][s][i]["free_stone"]=!this.sel_pick_up[e][s][i]["free_stone"],this.character[e][t][s][i]["free_stone"]=!this.character[e][t][s][i]["free_stone"])},getDateNow:function(){var e=new Date;return 1e8*e.getFullYear()+1e6*(e.getMonth()+1)+(1e4*e.getDate()+100*e.getHours()+e.getMinutes())},update:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.getDateNow();if(this.profiles.pools.info.version=s,t)"others"===this.activePool?n["i"](this.profiles.settings).then((function(t){0===t["code"]?e.$message.success("保存成功"):e.$message.error(t["msg"])})):(this.handlePools(this.activePool,s),n["h"](this.profiles.pools).then((function(t){0===t["code"]?e.$message.success("保存成功"):e.$message.error(t["msg"])})));else{for(var i in this.poolName)"others"!==i&&this.handlePools(i,s);n["f"]({settings:this.profiles.settings,pools:this.profiles.pools}).then((function(t){0===t["code"]?e.$message.success("保存成功"):e.$message.error(t["msg"])}))}},handlePools:function(e,t){var s={star1:{pool:[],prop:795,prop_last:0,name:"1星",prefix:"★"},star2:{pool:[],prop:180,prop_last:975,name:"2星",prefix:"★★"},star3:{pool:[],prop:25,prop_last:25,name:"3星",prefix:"★★★"}};for(var i in s){var r,n=Object(o["a"])(this.sel_normal[e][i]);try{for(n.s();!(r=n.n()).done;){var a=r.value;s[i]["pool"].push(a)}}catch(m){n.e(m)}finally{n.f()}}if(Object.keys(this.sel_pick_up[e].star3).length>0){for(var l in s["pick_up"]={pool:[],prop:7,prop_last:7,name:"Pick Up",prefix:"★★★",free_stone:[]},this.sel_pick_up[e].star3)this.sel_pick_up[e].star3.hasOwnProperty(l)&&(s["pick_up"]["pool"].push(l),this.sel_pick_up[e].star3[l]["free_stone"]&&s["pick_up"]["free_stone"].push(l));s.star3.prop-=7,s.star3.prop_last-=7}var p=1;if(Object.keys(this.sel_pick_up[e].star2).length>0){var c={};for(var u in this.sel_pick_up[e].star2)this.sel_pick_up[e].star2.hasOwnProperty(u)&&(c[10*this.sel_pick_up[e].star2[u]["prop"]]||(c[10*this.sel_pick_up[e].star2[u]["prop"]]=[]),c[10*this.sel_pick_up[e].star2[u]["prop"]].push(u));for(var h in c)s["pick_up"+p]={pool:c[h],prop:Number(h),prop_last:5.4*h,name:"Pick Up",prefix:"★★",free_stone:[]},p++;s.star2.prop-=50,s.star2.prop_last-=270}if(Object.keys(this.sel_pick_up[e].star1).length>0){var d={};for(var f in this.sel_pick_up[e].star1)this.sel_pick_up[e].star1.hasOwnProperty(f)&&(d[10*this.sel_pick_up[e].star1[f]["prop"]]||(d[10*this.sel_pick_up[e].star1[f]["prop"]]=[]),d[10*this.sel_pick_up[e].star1[f]["prop"]].push(f));for(var _ in d)s["pick_up"+p]={pool:d[_],prop:Number(_),prop_last:0,name:"Pick Up",prefix:"★",free_stone:[]},p++;s.star1.prop-=100}this.profiles.pools[e]["pools"]=s,this.profiles.pools[e]["info"]["version"]=t}},created:function(){var e=this;this.$route.meta.auth?this.checkAuth().then((function(){e.getSettings()})).catch((function(t){return e.$router.push("/index")})):this.getSettings()}},l=a,p=(s("b7a5"),s("2877")),c=Object(p["a"])(l,i,r,!1,null,"d60ca516",null);t["default"]=c.exports},a9e3:function(e,t,s){"use strict";var i=s("83ab"),r=s("da84"),o=s("94ca"),n=s("6eeb"),a=s("5135"),l=s("c6b6"),p=s("7156"),c=s("c04e"),u=s("d039"),h=s("7c73"),d=s("241c").f,f=s("06cf").f,_=s("9bf2").f,m=s("58a8").trim,g="Number",v=r[g],b=v.prototype,k=l(h(b))==g,x=function(e){var t,s,i,r,o,n,a,l,p=c(e,!1);if("string"==typeof p&&p.length>2)if(p=m(p),t=p.charCodeAt(0),43===t||45===t){if(s=p.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(p.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+p}for(o=p.slice(2),n=o.length,a=0;a<n;a++)if(l=o.charCodeAt(a),l<48||l>r)return NaN;return parseInt(o,i)}return+p};if(o(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var y,w=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof w&&(k?u((function(){b.valueOf.call(s)})):l(s)!=g)?p(new v(x(t)),s,w):x(t)},N=i?d(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;N.length>S;S++)a(v,y=N[S])&&!a(w,y)&&_(w,y,f(v,y));w.prototype=b,b.constructor=w,n(r,g,w)}},b680:function(e,t,s){"use strict";var i=s("23e7"),r=s("a691"),o=s("408a"),n=s("1148"),a=s("d039"),l=1..toFixed,p=Math.floor,c=function(e,t,s){return 0===t?s:t%2===1?c(e,t-1,s*e):c(e*e,t/2,s)},u=function(e){var t=0,s=e;while(s>=4096)t+=12,s/=4096;while(s>=2)t+=1,s/=2;return t},h=function(e,t,s){var i=-1,r=s;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=p(r/1e7)},d=function(e,t){var s=6,i=0;while(--s>=0)i+=e[s],e[s]=p(i/t),i=i%t*1e7},f=function(e){var t=6,s="";while(--t>=0)if(""!==s||0===t||0!==e[t]){var i=String(e[t]);s=""===s?i:s+n.call("0",7-i.length)+i}return s},_=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){l.call({})}));i({target:"Number",proto:!0,forced:_},{toFixed:function(e){var t,s,i,a,l=o(this),p=r(e),_=[0,0,0,0,0,0],m="",g="0";if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(t=u(l*c(2,69,1))-69,s=t<0?l*c(2,-t,1):l/c(2,t,1),s*=4503599627370496,t=52-t,t>0){h(_,0,s),i=p;while(i>=7)h(_,1e7,0),i-=7;h(_,c(10,i,1),0),i=t-1;while(i>=23)d(_,1<<23),i-=23;d(_,1<<i),h(_,1,1),d(_,2),g=f(_)}else h(_,0,s),h(_,1<<-t,0),g=f(_)+n.call("0",p);return p>0?(a=g.length,g=m+(a<=p?"0."+n.call("0",p-a)+g:g.slice(0,a-p)+"."+g.slice(a-p))):g=m+g,g}})},b7a5:function(e,t,s){"use strict";s("5a52")},b85c:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");var i=s("06c5");function r(e,t){var s;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=Object(i["a"])(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,l=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return a=e.done,e},e:function(e){l=!0,n=e},f:function(){try{a||null==s["return"]||s["return"]()}finally{if(l)throw n}}}}}}]);
//# sourceMappingURL=chunk-305d7d96.d69c10cc.js.map