(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03ae7b14"],{"0ccb":function(t,e,i){var n=i("50c4"),a=i("1148"),r=i("1d80"),o=Math.ceil,c=function(t){return function(e,i,c){var s,l,u=String(r(e)),d=u.length,f=void 0===c?" ":String(c),m=n(i);return m<=d||""==f?u:(s=m-d,l=a.call(f,o(s/f.length)),l.length>s&&(l=l.slice(0,s)),t?u+l:l+u)}};t.exports={start:c(!1),end:c(!0)}},1148:function(t,e,i){"use strict";var n=i("a691"),a=i("1d80");t.exports="".repeat||function(t){var e=String(a(this)),i="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},3690:function(t,e,i){"use strict";i("6402")},"47c5":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return c}));var n=i("365c"),a=function(){return Object(n["d"])({url:"/setting/live.json",method:"get"})},r=function(t){return Object(n["d"])({url:"/bili/dynamic.json",method:"get",params:t})},o=function(t){return Object(n["d"])({url:"/setting/live.save",method:"post",data:t})},c=function(t){return Object(n["d"])({url:"/bili/dynamic.delete",method:"post",data:t})}},"4d90":function(t,e,i){"use strict";var n=i("23e7"),a=i("0ccb").start,r=i("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},6402:function(t,e,i){},"8b63":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-drawer",{attrs:{direction:"ttb",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{staticClass:"form-box",attrs:{"label-width":"80px",size:"small"}},[i("el-form-item",{attrs:{label:"用户ID"}},[i("el-input",{model:{value:t.form.uid,callback:function(e){t.$set(t.form,"uid",e)},expression:"form.uid"}})],1),i("el-form-item",{attrs:{label:"Csrf"}},[i("el-input",{model:{value:t.form["csrf"],callback:function(e){t.$set(t.form,"csrf",e)},expression:"form['csrf']"}})],1),i("el-form-item",{attrs:{label:"Cookie"}},[i("el-input",{attrs:{type:"textarea",rows:"4",resize:"none"},model:{value:t.form.cookie,callback:function(e){t.$set(t.form,"cookie",e)},expression:"form.cookie"}})],1)],1)],1),i("el-row",{staticClass:"search-tool-bar"},[i("div",{staticStyle:{position:"absolute",left:"10px",top:"0"}},[i("el-button",{attrs:{icon:"el-icon-setting",size:"small"},on:{click:function(e){t.visible=!0}}}),i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"primary",loading:t.isSearching,icon:"el-icon-search"},on:{click:function(e){return t.searchDynamic(0)}}},[t._v("Search ")]),i("el-switch",{attrs:{"active-text":"显示完整时间","inactive-text":"只显示日期"},model:{value:t.fullTime,callback:function(e){t.fullTime=e},expression:"fullTime"}})],1),t.userInfo.uid||t.userInfo.mid?i("div",{staticClass:"user-info-box"},[i("div",{staticClass:"face-box"},[i("img",{attrs:{src:t.getFaceSrc()}})]),i("span",{staticClass:"uname-span"},[t._v(t._s(t.userInfo.uname||t.userInfo.name))])]):t._e(),t.userInfo.uid||t.userInfo.mid?i("span",{staticClass:"search-tool-btn"},[i("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.changeCheckAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}}),i("i",{class:t.deleting?"el-icon-loading btn-deleting":"el-icon-delete btn-danger",on:{click:t.deleteAll}}),i("span",{staticClass:"search-expand-btn",staticStyle:{"margin-left":"5px"}},[i("i",{staticClass:"el-icon-arrow-up",on:{click:function(e){return t.retractAll(!1)}}}),i("i",{staticClass:"el-icon-arrow-down",on:{click:function(e){return t.retractAll(!0)}}})])],1):t._e()]),i("el-row",{staticStyle:{position:"relative"}},[i("el-row",{staticClass:"dynamic-box"},[t._l(t.dynamic,(function(e,n){return i("xm-dynamic",{key:n,attrs:{value:e,"full-time":t.fullTime},on:{"update:value":function(t){e=t},selected:t.changeIndeterminate,delete:function(i){return t.delOneDynamic(e,n)}}})})),0!==t.form.offsetId?i("el-row",{staticStyle:{"text-align":"center"}},[t.hasMore?i("el-link",{attrs:{disabled:t.isSearching},on:{click:t.searchDynamic}},[t._v("加载更多")]):i("el-link",{attrs:{disabled:""}},[t._v("没有更多")])],1):t._e()],2),i("el-backtop",{staticStyle:{position:"absolute",right:"10px",bottom:"10px"},attrs:{target:".dynamic-box"}})],1)],1)},a=[];i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=i("b85c"),c=(i("d81d"),i("b64b"),i("4d90"),i("a434"),i("c740"),i("b0c0"),i("47c5")),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticStyle:{"margin-bottom":"8px"},attrs:{"body-style":"padding:10px 20px",shadow:"hover"},nativeOn:{click:function(e){return t.changeSelected(t.value.selected)}}},[i("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.value.retract,expression:"!value.retract"}],staticClass:"line-height-32"},[i("span",{staticClass:"text-time-top"},[t._v(t._s(t.fullTime?t.value.item.fullTime:t.value.item.time))]),i("span",{class:t.fullTime?"text-ellipsis padding-long":"text-ellipsis padding-short"},[t._v(t._s(t.value.item.content))]),i("span",{staticStyle:{position:"absolute",right:"0",top:"0"}},[t.value.hasOwnProperty("short_link")?i("i",{staticClass:"el-icon-paperclip btn-icon",staticStyle:{"margin-right":"10px"},on:{click:function(e){return e.stopPropagation(),t.jumpTo(t.value)}}}):t._e(),i("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{value:t.value.selected},on:{change:t.changeSelected}}),i("i",{class:t.value.deleting?"el-icon-loading btn-deleting":"el-icon-delete btn-icon btn-danger",on:{click:function(e){return e.stopPropagation(),t.delDynamic(e)}}}),i("i",{staticClass:"el-icon-arrow-down btn-icon",staticStyle:{"margin-left":"10px"},on:{click:function(e){e.stopPropagation(),t.value.retract=!0}}})],1)]),i("el-row",{directives:[{name:"show",rawName:"v-show",value:t.value.retract,expression:"value.retract"}]},[i("el-row",{staticClass:"line-height-32"},[i("span",{staticClass:"text-time"},[t._v(t._s(t.fullTime?t.value.item.fullTime:t.value.item.time))]),i("span",{staticStyle:{float:"right"}},[t.value.hasOwnProperty("short_link")?i("i",{staticClass:"el-icon-paperclip btn-icon",staticStyle:{"margin-right":"10px"},on:{click:function(e){return e.stopPropagation(),t.jumpTo(t.value)}}}):t._e(),i("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{value:t.value.selected},on:{change:t.changeSelected}}),i("i",{class:t.value.deleting?"el-icon-loading btn-deleting":"el-icon-delete btn-icon btn-danger",on:{click:function(e){return e.stopPropagation(),t.delDynamic(e)}}}),i("i",{staticClass:"el-icon-arrow-up btn-icon",staticStyle:{"margin-left":"10px"},on:{click:function(e){e.stopPropagation(),t.value.retract=!1}}})],1)]),i("p",{staticClass:"text-ellipsis",staticStyle:{padding:"0 5px"},attrs:{title:t.value.item.content}},[t._v(t._s(t.value.item.content))]),0!==t.value.item["orig_dy_id"]?i("el-card",{attrs:{"body-style":"padding:10px 20px;background-color:#f4f5f7",shadow:"never"}},[t.value.origin?i("el-row",{staticClass:"user-info-box-origin"},[i("div",{staticClass:"face-box"},[i("img",{attrs:{src:t.value.origin.user["head_url"]}})]),i("span",{staticClass:"uname-span"},[t._v(t._s(t.value.origin.user.name))]),i("span",{staticClass:"text-time"},[t._v(t._s(t.value.origin.item["upload_time"]))])]):t._e(),i("p",{staticClass:"text-ellipsis",attrs:{title:t.value.origin?t.value.origin.item.description||t.value.origin.item.content:""}},[t._v(" "+t._s(t.value.item.tips||t.value.origin.item.description||t.value.origin.item.content))])],1):t._e()],1)],1)},l=[],u={name:"bili-dynamic",data:function(){return{}},props:["value","fullTime"],methods:{delDynamic:function(){this.value.deleting||(this.value.deleting=!0,this.$emit("delete"))},changeSelected:function(t){this.value.selected=!t,this.$emit("selected")},jumpTo:function(t){window.open(t["short_link"])}},created:function(){console.log(this.value)}},d=u,f=(i("ac23"),i("2877")),m=Object(f["a"])(d,s,l,!1,null,"37a32865",null),h=m.exports,g={name:"bili-dynamic",components:{"xm-dynamic":h},data:function(){return{visible:!1,loading:!1,form:{uid:null,cookie:null,csrf:null,offsetId:0},dynamic:[],hasMore:!0,isSearching:!1,fullTime:!1,deleting:!1,checkAll:!1,isIndeterminate:!1}},computed:{userInfo:function(){return this.dynamic.length>0?this.dynamic[0].user:{face:null,uname:null,uid:null}},urlPrefix:function(){var t=this.$cookies.get("curUrlPrefix");return t?this.$urlConf[t+"_url"]:this.$urlConf["base_url"]}},methods:{getSettings:function(){var t=this;this.loading=!0,c["c"]().then((function(e){if(0!==e["code"])return t.loading=!1,void t.$message.error(e["msg"]);t.form={uid:e.data.uid,cookie:"l=v; "+e.data.cookie,csrf:e.data["csrf_token"],offsetId:0},t.loading=!1})).catch((function(e){t.loading=!1}))},searchDynamic:function(t){var e=this;this.isSearching=!0,0===t&&(this.form.offsetId=0,this.dynamic=[]);var i={uid:this.form.uid||"",cookie:this.form.cookie||"",offsetId:this.form.offsetId};c["b"](i).then((function(t){if(0===t["code"]&&0===t.data["code"])if(e.form.offsetId===t.data.data["next_offset"]||0===t.data.data["next_offset"])e.hasMore=!1;else{e.form.offsetId=t.data.data["next_offset"];var i=t.data.data["cards"];if(i&&i.length>0){var n,a=Object(o["a"])(i);try{for(a.s();!(n=a.n()).done;){var r=n.value,c=e.handleJson(r["card"]);8===r.desc.type&&(c.item={timestamp:c["pubdate"],content:"[Vidoe] "+c.title,orig_dy_id:0},c.user=c.owner),c.item.time=e.handleTime(c.item.timestamp),c.item.fullTime=e.handleTime(c.item.timestamp,!0),c.origin&&(8===c.item["orig_type"]&&(c.origin.item={upload_time:c.origin["pubdate"],content:"[Video] "+c.origin.title},c.origin.user=c.origin.owner),c.origin.item["upload_time"]=e.handleTime(c.origin.item["upload_time"]||c.origin.item["timestamp"]),c.origin.user["head_url"]=e.urlPrefix+"xmbot/web/image.get?url=".concat(c.origin.user["head_url"]||c.origin.user["face"])),c.retract=!1,c.selected=!1,c.desc=r.desc,c.deleting=!1,e.dynamic.push(c)}}catch(s){a.e(s)}finally{a.f()}}}e.changeIndeterminate(),e.isSearching=!1})).catch((function(t){e.isSearching=!1}))},getFaceSrc:function(){return this.userInfo.face?this.urlPrefix+"xmbot/web/image.get?url=".concat(this.userInfo.face):""},handleJson:function(t){var e=this;if("object"===r(t)){if(t instanceof Array)t.map((function(t){return e.handleJson(t)}));else if(t instanceof Object)for(var i=0,n=Object.keys(t);i<n.length;i++){var a=n[i];t[a]=this.handleJson(t[a])}return t}if(""===t)return t;var o="";try{o=JSON.parse(t)}catch(c){return t}return"object"===r(o)?this.handleJson(o):t},handleTime:function(t,e){var i=new Date;return i.setTime(1e3*t),e?"".concat(i.getFullYear(),"-")+"".concat(String(i.getMonth()+1).padStart(2,"0"),"-")+"".concat(String(i.getDate()).padStart(2,"0")," ")+"".concat(String(i.getHours()).padStart(2,"0"),":")+"".concat(String(i.getMinutes()).padStart(2,"0"),":")+"".concat(String(i.getSeconds()).padStart(2,"0")):"".concat(String(i.getMonth()+1).padStart(2,"0"),"-")+"".concat(String(i.getDate()).padStart(2,"0")," ")},delOneDynamic:function(t,e){var i=this,n={dynamic_id:t.desc["dynamic_id_str"],csrf:this.form.csrf,cookie:this.form.cookie};c["a"](n).then((function(t){0===t.data["code"]?(i.dynamic.splice(e,1),i.$message.success(t["msg"])):(i.dynamic[e].deleting=!1,i.$message.error(t["data"].message))})).catch((function(t){i.dynamic[e].deleting=!1}))},changeCheckAll:function(t){this.dynamic.map((function(e){return e.selected=t,e})),this.isIndeterminate=!1},changeIndeterminate:function(){if(this.checkAll=!this.dynamic.some((function(t){return!t.selected})),1===this.dynamic.length)this.isIndeterminate=!1;else{for(var t=!1,e=!0,i=0;i<this.dynamic.length;i++)0!==i?t=e!==this.dynamic[i].selected:e=this.dynamic[i].selected;this.isIndeterminate=t}},retractAll:function(t){this.dynamic.map((function(e){return e.retract=t,e}))},deleteAll:function(){var t=this;this.dynamic.map((function(e){if(!e.selected)return e;e.deleting=!0;var i=e.desc["dynamic_id_str"],n={dynamic_id:i,csrf:t.form.csrf,cookie:t.form.cookie};c["a"](n).then((function(e){var n=t.dynamic.findIndex((function(t){return t.desc["dynamic_id_str"]===i}));0===e.data["code"]?t.dynamic.splice(n,1):t.dynamic[n].deleting=!1})).catch((function(e){var n=t.dynamic.findIndex((function(t){return t.desc["dynamic_id_str"]===i}));t.dynamic[n].deleting=!1}))})),this.checkAll=!1,this.isIndeterminate=!1}},created:function(){var t=this;this.$route.meta.auth?this.checkAuth().then((function(){t.getSettings()})).catch((function(e){t.$router.push("/index"),t.$destroy(t.$options.name)})):this.getSettings()}},p=g,v=(i("3690"),Object(f["a"])(p,n,a,!1,null,"7fd7b319",null));e["default"]=v.exports},"9a0c":function(t,e,i){var n=i("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a434:function(t,e,i){"use strict";var n=i("23e7"),a=i("23cb"),r=i("a691"),o=i("50c4"),c=i("7b0b"),s=i("65f0"),l=i("8418"),u=i("1dde"),d=u("splice"),f=Math.max,m=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var i,n,u,d,p,v,b=c(this),y=o(b.length),x=a(t,y),S=arguments.length;if(0===S?i=n=0:1===S?(i=0,n=y-x):(i=S-2,n=m(f(r(e),0),y-x)),y+i-n>h)throw TypeError(g);for(u=s(b,n),d=0;d<n;d++)p=x+d,p in b&&l(u,d,b[p]);if(u.length=n,i<n){for(d=x;d<y-n;d++)p=d+n,v=d+i,p in b?b[v]=b[p]:delete b[v];for(d=y;d>y-n+i;d--)delete b[d-1]}else if(i>n)for(d=y-n;d>x;d--)p=d+n-1,v=d+i-1,p in b?b[v]=b[p]:delete b[v];for(d=0;d<i;d++)b[d+x]=arguments[d+2];return b.length=y-n+i,u}})},ac23:function(t,e,i){"use strict";i("b69b")},b69b:function(t,e,i){},b85c:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");var n=i("06c5");function a(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return c=t.done,t},e:function(t){s=!0,o=t},f:function(){try{c||null==i["return"]||i["return"]()}finally{if(s)throw o}}}}},c740:function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").findIndex,r=i("44d2"),o="findIndex",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);
//# sourceMappingURL=chunk-03ae7b14.901868ba.js.map